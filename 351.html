<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet">
    <title>S√°ch ƒêa Ng√¥n Ng·ªØ</title>
    <style>
        :root {
            --bg-body: #dcdcdc;
            --bg-book: #f4f1ea;
            --text-main: #1a1a1a;
            --text-sub: #555;
            --accent: #e67e22;
            --border: #d1ccc0;
        }

        /* Ch·∫ø ƒë·ªô Dark Mode */
        .dark-mode {
            --bg-body: #1a1a1b;
            --bg-book: #2c2c2e;
            --text-main: #e1e1e1;
            --text-sub: #b0b0b0;
            --accent: #f39c12;
            --border: #444;
        }

        body { 
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .book-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-book);
            min-height: 100vh;
            padding-top: 20px;
        }

        .sentence-item {
            display: flex;
            padding: 20px 5%; /* L·ªÅ tr√°i 5% theo y√™u c·∫ßu */
            border-bottom: 1px solid var(--border);
            word-wrap: break-word; /* T·ª± ƒë·ªông xu·ªëng d√≤ng */
        }

        .text-content {
            flex: 1;
            padding-right: 15px;
        }

        .row-cn { font-family: "Noto Serif SC","Segoe UI", Tahoma, Geneva, Verdana, sans-serif; font-size: 1.8rem; font-weight: normal; margin-bottom: 20px; line-height: 1.4; }
        .row-en { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-main); opacity: 0.9; }
        .row-vi { font-size: 1rem; color: var(--text-sub); font-style: italic; }
        
        .pos-tag { font-size: 0.85rem; color: var(--accent); display: block; margin-bottom: 20px; margin-top: 0px; font-weight: normal; }

        /* Ph√≠m ch·ª©c nƒÉng d·∫°ng c·ªôt icon */
        .control-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: 0.2s;
        }
        .btn-icon:hover { background: #eee; transform: scale(1.1); }

        /* Menu n·ªïi c·ªë ƒë·ªãnh ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }

        .settings-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            color: #333;
            font-size: 14px;
        }

        .show-settings .settings-box { display: block; }

        .btn-main-float {
            width: 50px;
            height: 50px;
            background: #34495e;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

	/* Th√™m v√†o trong th·∫ª <style> */
	.pinyin-row {
    		font-size: 16px;
		font-weight: normal;
   		color: #27ae60; /* M√†u xanh l√° d·ªãu m·∫Øt */
    		display: block;
    		margin-top: 0px;
		margin-bottom: 20px;
	}


        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="book-container" id="bookContent">
    </div>

<div class="floating-menu" id="floatMenu">
    <div class="settings-box">
        <strong>‚öôÔ∏è C√†i ƒë·∫∑t</strong><hr>
        T·ªëc ƒë·ªô: <input type="range" id="rate" min="0.5" max="1.3" step="0.1" value="0.9" style="width: 100px;"><br>
        <label><input type="checkbox" id="autoNext"> T·ª± ƒë·ªông chuy·ªÉn</label><br>
	<button onclick="toggleAllPinyin()" style="width: 100%; margin-top: 10px;">üî§ ·∫®n/Hi·ªán Pinyin</button>
        <button onclick="toggleDarkMode()" style="width: 100%; margin-top: 10px;">üåô Dark Mode</button>
    </div>
    <button class="btn-main-float" onclick="document.getElementById('floatMenu').classList.toggle('show-settings')">üõ†Ô∏è</button>
</div>

<script>
const sentences = [
  {
    cn_raw: `(‰∏Ä)ÊàëÂêÉËøá‰∏≠ËçØ„ÄÇ`,
    cn_split: `Êàë - ÂêÉ - Ëøá - ‰∏≠ËçØ`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´`,
    en_raw: `(1) I have taken Chinese medicine.`,
    en_split: `I - have taken - Chinese medicine`,
    en_pos: `Pronoun - Verb (Present Perfect) - Noun Phrase`,
    vi: `(I) T√¥i ƒë√£ t·ª´ng u·ªëng thu·ªëc B·∫Øc.`,
    pinyin: `(Yƒ´) W«í chƒ´gu√≤ Zh≈çngy√†o.`
  },
  {
    cn_raw: `(Â±±Êú¨ÂíåÁà±Âæ∑ÂçéË∞àÊù•‰∏≠ÂõΩÂêéÁöÑÁªèÂéÜ‚Ä¶)`,
    cn_split: `Â±±Êú¨ - Âíå - Áà±Âæ∑Âçé - Ë∞à - Êù• - ‰∏≠ÂõΩ - Âêé - ÁöÑ - ÁªèÂéÜ`,
    cn_pos: `Danh t·ª´ - Li√™n t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - Danh t·ª´ ch·ªâ th·ªùi gian - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´`,
    en_raw: `(Yamamoto and Edward talk about their experiences after coming to China...)`,
    en_split: `Yamamoto and Edward - talk - about - their experiences - after coming to China`,
    en_pos: `Noun Phrase - Verb - Preposition - Noun Phrase - Prepositional Phrase`,
    vi: `(S∆°n B·∫£n v√† √Åi ƒê·ª©c Hoa n√≥i v·ªÅ tr·∫£i nghi·ªám sau khi ƒë·∫øn Trung Qu·ªëc...)`,
    pinyin: `(ShƒÅnbƒõn h√© √Äid√©hu√° t√°n l√°i Zh≈çnggu√≥ h√≤u de jƒ´ngl√¨‚Ä¶)`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:Â±±Êú¨,‰Ω†ÁöÑÊÑüÂÜíÂ•Ω‰∫ÜÂêó?`,
    cn_split: `Áà±Âæ∑Âçé - : - Â±±Êú¨ - , - ‰Ω† - ÁöÑ - ÊÑüÂÜí - Â•Ω - ‰∫Ü - Âêó - ?`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´ - T√≠nh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Edward: Yamamoto, is your cold better?`,
    en_split: `Edward - : - Yamamoto - , - is - your cold - better - ?`,
    en_pos: `Noun - Noun - Verb - Noun Phrase - Adjective`,
    vi: `√Åi ƒê·ª©c Hoa: S∆°n B·∫£n, b·ªánh c·∫£m c·ªßa b·∫°n ƒë√£ kh·ªèi ch∆∞a?`,
    pinyin: `√Äid√©hu√°: ShƒÅnbƒõn, n«ê de g«énm√†o h«éole ma?`
  },
  {
    cn_raw: `Â±±Êú¨:Â•Ω‰∫Ü„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - Â•Ω - ‰∫Ü`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - T√≠nh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `Yamamoto: It's better.`,
    en_split: `Yamamoto - : - It - is - better`,
    en_pos: `Noun - Pronoun - Verb - Adjective`,
    vi: `S∆°n B·∫£n: Kh·ªèi r·ªìi.`,
    pinyin: `ShƒÅnbƒõn: H«éole.`
  },
  {
    cn_raw: `Êù•‰∏≠ÂõΩ‰ª•ÂêéÊàëÂ∑≤ÁªèÂæóËøá‰∏âÊ¨°ÊÑüÂÜí‰∫Ü„ÄÇ`,
    cn_split: `Êù• - ‰∏≠ÂõΩ - ‰ª•Âêé - Êàë - Â∑≤Áªè - Âæó - Ëøá - ‰∏â - Ê¨° - ÊÑüÂÜí - ‰∫Ü`,
    cn_pos: `ƒê·ªông t·ª´ - Danh t·ª´ - Danh t·ª´ ch·ªâ th·ªùi gian - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - S·ªë t·ª´ - L∆∞·ª£ng t·ª´ - Danh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `I have already had colds three times since I came to China.`,
    en_split: `I - have already had - colds - three times - since I came to China`,
    en_pos: `Pronoun - Verb Phrase - Noun - Adverbial - Prepositional Phrase`,
    vi: `Sau khi ƒë·∫øn Trung Qu·ªëc, t√¥i ƒë√£ b·ªã c·∫£m ba l·∫ßn r·ªìi.`,
    pinyin: `L√°i Zh≈çnggu√≥ y«êh√≤u w«í y«êjƒ´ng d√©gu√≤ sƒÅnc√¨ g«énm√†o le.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:Êàë‰∏ÄÊ¨°ÁóÖ‰πüÊ≤°ÊúâÂæóËøá„ÄÇ`,
    cn_split: `Áà±Âæ∑Âçé - : - Êàë - ‰∏Ä - Ê¨° - ÁóÖ - ‰πü - Ê≤°Êúâ - Âæó - Ëøá`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - S·ªë t·ª´ - L∆∞·ª£ng t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i`,
    en_raw: `Edward: I haven't been sick even once.`,
    en_split: `Edward - : - I - haven't been - sick - even once`,
    en_pos: `Noun - Pronoun - Verb Phrase - Adjective - Adverbial`,
    vi: `√Åi ƒê·ª©c Hoa: T√¥i ch∆∞a t·ª´ng b·ªã b·ªánh m·ªôt l·∫ßn n√†o.`,
    pinyin: `√Äid√©hu√°: W«í yƒ´c√¨ b√¨ng yƒõ m√©iy«íu d√©gu√≤.`
  },
  {
    cn_raw: `Â±±Êú¨:‰Ω†Ë∫´‰ΩìÁúü‰∏çÈîô„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - ‰Ω† - Ë∫´‰Ωì - Áúü - ‰∏çÈîô`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    en_raw: `Yamamoto: Your health is really good.`,
    en_split: `Yamamoto - : - Your health - is - really good`,
    en_pos: `Noun - Noun Phrase - Verb - Adjective Phrase`,
    vi: `S∆°n B·∫£n: S·ª©c kh·ªèe c·ªßa b·∫°n th·∫≠t t·ªët.`,
    pinyin: `ShƒÅnbƒõn: N«ê shƒìnt«ê zhƒìn b√πcu√≤.`
  },
  {
    cn_raw: `ÊàëËøò‰ΩèËøá‰∏ÄÊ¨°Èô¢Âë¢,ÁúãËøá‰∏≠Âåª,‰πüÂêÉËøá‰∏≠ËçØ„ÄÇ`,
    cn_split: `Êàë - Ëøò - ‰Ωè - Ëøá - ‰∏Ä - Ê¨° - Èô¢ - Âë¢ - , - Áúã - Ëøá - ‰∏≠Âåª - , - ‰πü - ÂêÉ - Ëøá - ‰∏≠ËçØ`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - S·ªë t·ª´ - L∆∞·ª£ng t·ª´ - Danh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´`,
    en_raw: `I have also been hospitalized once, seen a TCM doctor, and taken Chinese medicine.`,
    en_split: `I - have also been hospitalized - once - , - seen - a TCM doctor - , - and - taken - Chinese medicine`,
    en_pos: `Pronoun - Verb Phrase - Adverbial - Verb - Noun Phrase - Conjunction - Verb - Noun Phrase`,
    vi: `T√¥i c√≤n t·ª´ng n·∫±m vi·ªán m·ªôt l·∫ßn n·ªØa, ƒë√£ kh√°m ƒë√¥ng y v√† c≈©ng ƒë√£ u·ªëng thu·ªëc B·∫Øc.`,
    pinyin: `W«í h√°i zh√πgu√≤ yƒ´c√¨ yu√†n ne, k√†ngu√≤ zh≈çngyƒ´, yƒõ chƒ´gu√≤ zh≈çngy√†o.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:Âê¨ËØ¥‰∏≠ËçØÂæàËã¶,ÊòØÂêó?`,
    cn_split: `Áà±Âæ∑Âçé - : - Âê¨ËØ¥ - ‰∏≠ËçØ - Âæà - Ëã¶ - , - ÊòØ - Âêó - ?`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·ªông t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Edward: I heard that Chinese medicine is very bitter, is it?`,
    en_split: `Edward - : - I - heard - that - Chinese medicine - is - very bitter - , - is it - ?`,
    en_pos: `Noun - Pronoun - Verb - Conjunction - Noun Phrase - Verb - Adjective - Phrase`,
    vi: `√Åi ƒê·ª©c Hoa: Nghe n√≥i thu·ªëc B·∫Øc r·∫•t ƒë·∫Øng, c√≥ ph·∫£i kh√¥ng?`,
    pinyin: `√Äid√©hu√°: Tƒ´ngshu≈ç zh≈çngy√†o hƒõn k«î, sh√¨ ma?`
  },
  {
    cn_raw: `Â±±Êú¨:ÊúâÁöÑËã¶,ÊúâÁöÑ‰∏çËã¶„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - ÊúâÁöÑ - Ëã¶ - , - ÊúâÁöÑ - ‰∏ç - Ëã¶`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - T√≠nh t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    en_raw: `Yamamoto: Some are bitter, some are not.`,
    en_split: `Yamamoto - : - Some - are - bitter - , - some - are - not`,
    en_pos: `Noun - Pronoun - Verb - Adjective - Pronoun - Verb - Adverb`,
    vi: `S∆°n B·∫£n: C√≥ lo·∫°i ƒë·∫Øng, c√≥ lo·∫°i kh√¥ng ƒë·∫Øng.`,
    pinyin: `ShƒÅnbƒõn: Y«íude k«î, y«íude b√π k«î.`
  },
  {
    cn_raw: `ÊàëÂñùÁöÑÊòØ‰∏≠ÊàêËçØ,ÁîúÁîúÁöÑ,‰∏ÄÁÇπÂÑø‰πü‰∏çËã¶„ÄÇ`,
    cn_split: `Êàë - Âñù - ÁöÑ - ÊòØ - ‰∏≠ÊàêËçØ - , - ÁîúÁîú - ÁöÑ - , - ‰∏ÄÁÇπÂÑø - ‰πü - ‰∏ç - Ëã¶`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - ƒê·ªông t·ª´ - Danh t·ª´ - D·∫•u ph·∫©y - T√≠nh t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´ - Ph√≥ t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    en_raw: `What I drink is prepared Chinese medicine, it's sweet, not bitter at all.`,
    en_split: `What I drink - is - prepared Chinese medicine - , - it - is - sweet - , - not bitter - at all`,
    en_pos: `Noun Clause - Verb - Noun Phrase - Pronoun - Verb - Adjective - Adjective - Adverbial`,
    vi: `Th·ª© t√¥i u·ªëng l√† thu·ªëc B·∫Øc th√†nh ph·∫©m, ng·ªçt ng·ªçt, m·ªôt ch√∫t c≈©ng kh√¥ng ƒë·∫Øng.`,
    pinyin: `W«í hƒì de sh√¨ zh≈çngch√©ngy√†o, ti√°nti√°n de, yƒ´di«énr yƒõ b√π k«î.`
  },
  {
    cn_raw: `ÂêÉ‰∫ÜËøô‰∫õ‰∏≠ËçØÊàëÁöÑÁóÖÂ∞±Â•Ω‰∫Ü„ÄÇ`,
    cn_split: `ÂêÉ - ‰∫Ü - Ëøô‰∫õ - ‰∏≠ËçØ - Êàë - ÁöÑ - ÁóÖ - Â∞± - Â•Ω - ‰∫Ü`,
    cn_pos: `ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - ƒê·∫°i t·ª´ ch·ªâ ƒë·ªãnh - Danh t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `After taking these Chinese medicines, my illness got better.`,
    en_split: `After taking - these Chinese medicines - , - my illness - got - better`,
    en_pos: `Prepositional Phrase - Noun Phrase - Noun Phrase - Verb - Adjective`,
    vi: `U·ªëng nh·ªØng lo·∫°i thu·ªëc B·∫Øc n√†y xong b·ªánh c·ªßa t√¥i ƒë√£ kh·ªèi r·ªìi.`,
    pinyin: `Chƒ´le zh√®xiƒì zh≈çngy√†o w«í de b√¨ng ji√π h«éole.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:ÊàëÂê¨ËØ¥‰∏≠ÂåªÁúãÁóÖÂæàÊúâÊÑèÊÄù„ÄÇ`,
    cn_split: `Áà±Âæ∑Âçé - : - Êàë - Âê¨ËØ¥ - ‰∏≠Âåª - ÁúãÁóÖ - Âæà - ÊúâÊÑèÊÄù`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    en_raw: `Edward: I heard that TCM treatment is very interesting.`,
    en_split: `Edward - : - I - heard - that - TCM treatment - is - very interesting`,
    en_pos: `Noun - Pronoun - Verb - Conjunction - Noun Phrase - Verb - Adjective`,
    vi: `√Åi ƒê·ª©c Hoa: T√¥i nghe n√≥i ƒê√¥ng y kh√°m b·ªánh r·∫•t th√∫ v·ªã.`,
    pinyin: `√Äid√©hu√°: W«í tƒ´ngshu≈ç zh≈çngyƒ´ k√†nb√¨ng hƒõn y«íuy√¨si.`
  },
  {
    cn_raw: `Â±±Êú¨:‰∏≠ÂåªÁúãÁóÖ‰∏çÂåñÈ™å,Âè™Áî®ÊâãÊë∏‰∏ÄÊë∏ËÑâÂ∞±Áªô‰Ω†ÂºÄËçØÊñπ„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - ‰∏≠Âåª - ÁúãÁóÖ - ‰∏ç - ÂåñÈ™å - , - Âè™ - Áî® - Êâã - Êë∏‰∏ÄÊë∏ - ËÑâ - Â∞± - Áªô - ‰Ω† - ÂºÄ - ËçØÊñπ`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - Danh t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ (l·∫∑p) - Danh t·ª´ - Ph√≥ t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´`,
    en_raw: `Yamamoto: TCM doesn't involve lab tests, it just uses hands to feel the pulse and then prescribes a recipe for you.`,
    en_split: `Yamamoto - : - TCM - doesn't involve - lab tests - , - it - just - uses - hands - to feel - the pulse - and then - prescribes - a recipe - for you`,
    en_pos: `Noun - Noun - Verb Phrase - Noun Phrase - Pronoun - Adverb - Verb - Noun - Infinitve - Noun Phrase - Adverb - Verb - Noun Phrase - Prepositional Phrase`,
    vi: `S∆°n B·∫£n: ƒê√¥ng y kh√°m b·ªánh kh√¥ng x√©t nghi·ªám, ch·ªâ d√πng tay b·∫Øt m·∫°ch l√† k√™ ƒë∆°n thu·ªëc cho b·∫°n r·ªìi.`,
    pinyin: `ShƒÅnbƒõn: Zh≈çngyƒ´ k√†nb√¨ng b√π hu√†y√†n, zh«ê y√≤ng sh«íu m≈ç yƒ´ m≈ç m√†i ji√π gƒõi n«ê kƒÅi y√†ofƒÅng.`
  },
  {
    cn_raw: `ËøòÁî®ÊåâÊë©„ÄÅÈíàÁÅ∏Á≠âÊñπÊ≥ïÁªôÁóÖ‰∫∫Ê≤ªÁóÖ„ÄÇ`,
    cn_split: `Ëøò - Áî® - ÊåâÊë© - „ÄÅ - ÈíàÁÅ∏ - Á≠â - ÊñπÊ≥ï - Áªô - ÁóÖ‰∫∫ - Ê≤ªÁóÖ`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - D·∫•u li·ªát k√™ - Danh t·ª´ - Tr·ª£ t·ª´ - Danh t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ`,
    en_raw: `It also uses methods like massage and acupuncture to treat patients.`,
    en_split: `It - also - uses - methods - like massage and acupuncture - to treat - patients`,
    en_pos: `Pronoun - Adverb - Verb - Noun Phrase - Prepositional Phrase - Infinitive - Noun`,
    vi: `C√≤n d√πng c√°c ph∆∞∆°ng ph√°p nh∆∞ xoa b√≥p, ch√¢m c·ª©u ƒë·ªÉ ch·ªØa b·ªánh cho b·ªánh nh√¢n.`,
    pinyin: `H√°i y√≤ng √†nm√≥, zhƒìnji«î dƒõng fƒÅngf«é gƒõi b√¨ng r√©n zh√¨b√¨ng.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:ÊòØÊâìÈíàÂêó?`,
    cn_split: `Áà±Âæ∑Âçé - : - ÊòØ - ÊâìÈíà - Âêó`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Edward: Is it an injection?`,
    en_split: `Edward - : - Is - it - an injection - ?`,
    en_pos: `Noun - Verb - Pronoun - Noun Phrase`,
    vi: `√Åi ƒê·ª©c Hoa: C√≥ ph·∫£i ti√™m kh√¥ng?`,
    pinyin: `√Äid√©hu√°: Sh√¨ d«ézhƒìn ma?`
  },
  {
    cn_raw: `Â±±Êú¨:‰∏çÊòØÊâìÈíà,ÊòØÊâéÈíà„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - ‰∏ç - ÊòØ - ÊâìÈíà - , - ÊòØ - ÊâéÈíà`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ t√¢n ng·ªØ`,
    en_raw: `Yamamoto: It's not an injection, it's acupuncture (needle insertion).`,
    en_split: `Yamamoto - : - It - is not - an injection - , - it - is - needle insertion`,
    en_pos: `Noun - Pronoun - Verb Phrase - Noun Phrase - Pronoun - Verb - Noun Phrase`,
    vi: `S∆°n B·∫£n: Kh√¥ng ph·∫£i ti√™m, m√† l√† ch√¢m kim.`,
    pinyin: `ShƒÅnbƒõn: B√πsh√¨ d«ézhƒìn, sh√¨ zhƒÅzhƒìn.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:‰Ω†ÈíàÁÅ∏ËøáÂêó?`,
    cn_split: `Áà±Âæ∑Âçé - : - ‰Ω† - ÈíàÁÅ∏ - Ëøá - Âêó`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Edward: Have you ever had acupuncture?`,
    en_split: `Edward - : - Have - you - ever had - acupuncture - ?`,
    en_pos: `Noun - Verb - Pronoun - Verb Phrase - Noun`,
    vi: `√Åi ƒê·ª©c Hoa: B·∫°n ƒë√£ t·ª´ng ch√¢m c·ª©u ch∆∞a?`,
    pinyin: `√Äid√©hu√°: N«ê zhƒìnji«îgu√≤ ma?`
  },
  {
    cn_raw: `Â±±Êú¨:ÊàëÊåâÊë©Ëøá,Ê≤°ÊúâÈíàÁÅ∏Ëøá,‰ΩÜÊòØËßÅËøá„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - Êàë - ÊåâÊë© - Ëøá - , - Ê≤°Êúâ - ÈíàÁÅ∏ - Ëøá - , - ‰ΩÜÊòØ - ËßÅ - Ëøá`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - D·∫•u ph·∫©y - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - D·∫•u ph·∫©y - Li√™n t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i`,
    en_raw: `Yamamoto: I've had a massage, haven't had acupuncture, but I've seen it.`,
    en_split: `Yamamoto - : - I - have had - a massage - , - haven't had - acupuncture - , - but - have seen - it`,
    en_pos: `Noun - Pronoun - Verb Phrase - Noun Phrase - Verb Phrase - Noun - Conjunction - Verb Phrase - Pronoun`,
    vi: `S∆°n B·∫£n: T√¥i ƒë√£ t·ª´ng xoa b√≥p, ch∆∞a t·ª´ng ch√¢m c·ª©u, nh∆∞ng ƒë√£ nh√¨n th·∫•y r·ªìi.`,
    pinyin: `ShƒÅnbƒõn: W«í √†nm√≥gu√≤, m√©iy«íu zhƒìnji«îgu√≤, d√†nsh√¨ ji√†ngu√≤.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:ÊòØ‰ªÄ‰πàÊ†∑ÁöÑÈíàÂë¢?`,
    cn_split: `Áà±Âæ∑Âçé - : - ÊòØ - ‰ªÄ‰πà - Ê†∑ - ÁöÑ - Èíà - Âë¢`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ nghi v·∫•n - L∆∞·ª£ng t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `Edward: What kind of needle is it?`,
    en_split: `Edward - : - What kind of needle - is - it - ?`,
    en_pos: `Noun - Noun Phrase - Verb - Pronoun`,
    vi: `√Åi ƒê·ª©c Hoa: ƒê√≥ l√† lo·∫°i kim nh∆∞ th·∫ø n√†o?`,
    pinyin: `√Äid√©hu√°: Sh√¨ sh√©nme y√†ng de zhƒìn ne?`
  },
  {
    cn_raw: `Â±±Êú¨:ÊòØ‰∏ÄÁßçÂæàÁªÜÂæàÁªÜÁöÑÈíà„ÄÇ`,
    cn_split: `Â±±Êú¨ - : - ÊòØ - ‰∏Ä - Áßç - Âæà - ÁªÜ - Âæà - ÁªÜ - ÁöÑ - Èíà`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - ƒê·ªông t·ª´ - S·ªë t·ª´ - L∆∞·ª£ng t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´`,
    en_raw: `Yamamoto: It's a very, very thin needle.`,
    en_split: `Yamamoto - : - It - is - a very, very thin needle`,
    en_pos: `Noun - Pronoun - Verb - Noun Phrase`,
    vi: `S∆°n B·∫£n: L√† m·ªôt lo·∫°i kim r·∫•t m·∫£nh, r·∫•t m·∫£nh.`,
    pinyin: `ShƒÅnbƒõn: Sh√¨ yƒ´zh«íng hƒõn x√¨ hƒõn x√¨ de zhƒìn.`
  },
  {
    cn_raw: `Áà±Âæ∑Âçé:Ê≤°ËßÅËøá„ÄÇ`,
    cn_split: `Áà±Âæ∑Âçé - : - Ê≤° - ËßÅ - Ëøá`,
    cn_pos: `Danh t·ª´ - D·∫•u chia - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i`,
    en_raw: `Edward: I haven't seen it.`,
    en_split: `Edward - : - I - haven't - seen - it`,
    en_pos: `Noun - Pronoun - Verb - Verb - Pronoun`,
    vi: `√Åi ƒê·ª©c Hoa: Ch∆∞a t·ª´ng th·∫•y.`,
    pinyin: `√Äid√©hu√°: M√©i ji√†ngu√≤.`
  }
];
// C·∫≠p nh·∫≠t h√†m render ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu an to√†n h∆°n
function renderBook() {
    const container = document.getElementById('bookContent');
    sentences.forEach((s, i) => {
        const item = document.createElement('div');
        item.className = 'sentence-item';
        item.innerHTML = `
            <div class="text-content">
                <div class="row-cn">
                    <span id="cn-txt-${i}">${s.cn_raw}</span>
                </div>
                <div id="cn-pos-${i}" class="pos-tag hidden">${s.cn_pos}</div>
                <div id="pinyin-${i}" class="pinyin-row hidden">${s.pinyin || ''}</div>
                <div class="row-en">
                    <span id="en-txt-${i}">${s.en_raw}</span>
                </div>
                <div id="en-pos-${i}" class="pos-tag hidden">${s.en_pos}</div>
                <div class="row-vi">${s.vi}</div>
            </div>
            <div class="control-sidebar">
                <button class="btn-icon" onclick="playSpeech(${i}, 'cn')">‚ôò</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'cn')">‚ôî</button>
                <button class="btn-icon" onclick="playSpeech(${i}, 'en')">‚ôñ</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'en')">‚ôï</button>
            </div>
        `;
        container.appendChild(item);
    });
}
// H√†m ph√°t √¢m m·ªõi: L·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ m·∫£ng thay v√¨ truy·ªÅn chu·ªói qua HTML
// H√†m ph√°t √¢m: T·ª± ƒë·ªông duy tr√¨ ng√¥n ng·ªØ ƒëang ch·ªçn
function playSpeech(index, langType) {
    // 1. D·ª´ng m·ªçi √¢m thanh ƒëang ph√°t ƒë·ªÉ tr√°nh ch·ªìng ch√©o
    window.speechSynthesis.cancel(); 

    let textToRead = "";
    let langCode = "";

    // 2. X√°c ƒë·ªãnh n·ªôi dung v√† m√£ ng√¥n ng·ªØ d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    if (langType === 'cn') {
        textToRead = sentences[index].cn_raw;
        langCode = 'zh-CN';
    } else {
        textToRead = sentences[index].en_raw;
        langCode = 'en-US';
    }

    const msg = new SpeechSynthesisUtterance();
    msg.text = textToRead;
    msg.lang = langCode;
    msg.rate = document.getElementById('rate').value;
    
    // 3. Hi·ªáu ·ª©ng Highlight: T√¥ m√†u c√¢u ƒëang ƒë·ªçc ƒë·ªÉ d·ªÖ theo d√µi
    const allItems = document.getElementsByClassName('sentence-item');
    // X√≥a m√†u c·ªßa t·∫•t c·∫£ c√°c c√¢u kh√°c
    Array.from(allItems).forEach(item => item.style.backgroundColor = "transparent");
    // T√¥ m√†u v√†ng nh·∫°t cho c√¢u hi·ªán t·∫°i
    allItems[index].style.backgroundColor = "rgba(230, 126, 34, 0.1)";

    // 4. X·ª≠ l√Ω khi k·∫øt th√∫c c√¢u
    msg.onend = () => {
        const isAuto = document.getElementById('autoNext').checked;
        if (isAuto && index < sentences.length - 1) {
            setTimeout(() => {
                // QUAN TR·ªåNG: Truy·ªÅn ƒë√∫ng langType hi·ªán t·∫°i v√†o l·∫ßn g·ªçi ti·∫øp theo
                playSpeech(index + 1, langType); 
                
                // T·ª± ƒë·ªông cu·ªôn m√†n h√¨nh ƒë·∫øn c√¢u ti·∫øp theo
                allItems[index + 1].scrollIntoView({
                    behavior: "smooth", 
                    block: "center"
                });
            }, 500); // Ngh·ªâ 0.5 gi√¢y gi·ªØa c√°c c√¢u ƒë·ªÉ ng∆∞·ªùi d√πng k·ªãp ng·∫•m
        }
    };

    window.speechSynthesis.speak(msg);
}
function toggleMode(index, lang) {
    const txtSpan = document.getElementById(`${lang}-txt-${index}`);
    const posSpan = document.getElementById(`${lang}-pos-${index}`);
    const isOriginal = txtSpan.innerText === sentences[index][`${lang}_raw`];

    txtSpan.innerText = isOriginal ? sentences[index][`${lang}_split`] : sentences[index][`${lang}_raw`];
    posSpan.classList.toggle('hidden');
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

function toggleAllPinyin() {
    // 1. L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class l√† pinyin-row
    const pinyinElements = document.getElementsByClassName('pinyin-row');
    
    // 2. Ki·ªÉm tra n·∫øu kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o (b√°o l·ªói ra Console ƒë·ªÉ ki·ªÉm tra)
    if (pinyinElements.length === 0) {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o c√≥ class 'pinyin-row'");
        return;
    }

    // 3. Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ v√† b·∫≠t/t·∫Øt class 'hidden'
    for (let i = 0; i < pinyinElements.length; i++) {
        pinyinElements[i].classList.toggle('hidden');
    }
}

function speak(text, lang, index) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    msg.rate = document.getElementById('rate').value;

    msg.onend = () => {
        if (document.getElementById('autoNext').checked && index < sentences.length - 1) {
            setTimeout(() => {
                speak(sentences[index + 1].cn_raw, 'zh-CN', index + 1);
                document.getElementsByClassName('sentence-item')[index+1].scrollIntoView({behavior: "smooth", block: "center"});
            }, 1200);
        }
    };
    window.speechSynthesis.speak(msg);
}

renderBook();
</script>
</body>
</html>