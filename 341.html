<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet">
    <title>S√°ch ƒêa Ng√¥n Ng·ªØ</title>
    <style>
        :root {
            --bg-body: #dcdcdc;
            --bg-book: #f4f1ea;
            --text-main: #1a1a1a;
            --text-sub: #555;
            --accent: #e67e22;
            --border: #d1ccc0;
        }

        /* Ch·∫ø ƒë·ªô Dark Mode */
        .dark-mode {
            --bg-body: #1a1a1b;
            --bg-book: #2c2c2e;
            --text-main: #e1e1e1;
            --text-sub: #b0b0b0;
            --accent: #f39c12;
            --border: #444;
        }

        body { 
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .book-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-book);
            min-height: 100vh;
            padding-top: 20px;
        }

        .sentence-item {
            display: flex;
            padding: 20px 5%; /* L·ªÅ tr√°i 5% theo y√™u c·∫ßu */
            border-bottom: 1px solid var(--border);
            word-wrap: break-word; /* T·ª± ƒë·ªông xu·ªëng d√≤ng */
        }

        .text-content {
            flex: 1;
            padding-right: 15px;
        }

        .row-cn { font-family: "Noto Serif SC","Segoe UI", Tahoma, Geneva, Verdana, sans-serif; font-size: 1.8rem; font-weight: normal; margin-bottom: 20px; line-height: 1.4; }
        .row-en { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-main); opacity: 0.9; }
        .row-vi { font-size: 1rem; color: var(--text-sub); font-style: italic; }
        
        .pos-tag { font-size: 0.85rem; color: var(--accent); display: block; margin-bottom: 20px; margin-top: 0px; font-weight: normal; }

        /* Ph√≠m ch·ª©c nƒÉng d·∫°ng c·ªôt icon */
        .control-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: 0.2s;
        }
        .btn-icon:hover { background: #eee; transform: scale(1.1); }

        /* Menu n·ªïi c·ªë ƒë·ªãnh ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }

        .settings-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            color: #333;
            font-size: 14px;
        }

        .show-settings .settings-box { display: block; }

        .btn-main-float {
            width: 50px;
            height: 50px;
            background: #34495e;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

	/* Th√™m v√†o trong th·∫ª <style> */
	.pinyin-row {
    		font-size: 16px;
		font-weight: normal;
   		color: #27ae60; /* M√†u xanh l√° d·ªãu m·∫Øt */
    		display: block;
    		margin-top: 0px;
		margin-bottom: 20px;
	}


        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="book-container" id="bookContent">
    </div>

<div class="floating-menu" id="floatMenu">
    <div class="settings-box">
        <strong>‚öôÔ∏è C√†i ƒë·∫∑t</strong><hr>
        T·ªëc ƒë·ªô: <input type="range" id="rate" min="0.5" max="1.3" step="0.1" value="0.9" style="width: 100px;"><br>
        <label><input type="checkbox" id="autoNext"> T·ª± ƒë·ªông chuy·ªÉn</label><br>
	<button onclick="toggleAllPinyin()" style="width: 100%; margin-top: 10px;">üî§ ·∫®n/Hi·ªán Pinyin</button>
        <button onclick="toggleDarkMode()" style="width: 100%; margin-top: 10px;">üåô Dark Mode</button>
    </div>
    <button class="btn-main-float" onclick="document.getElementById('floatMenu').classList.toggle('show-settings')">üõ†Ô∏è</button>
</div>

<script>
const sentences = [
  {
    cn_raw: `(‰∏Ä) ÊàëÁªôÊÇ®ÊçéÊù•‰∫Ü‰∏Ä‰∫õ‰∏úË•ø`,
    cn_split: `Êàë - Áªô - ÊÇ® - Êçé - Êù• - ‰∫Ü - ‰∏Ä‰∫õ - ‰∏úË•ø`,
    cn_pos: `ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´ - ƒê·ªãnh t·ª´ - Danh t·ª´`,
    en_raw: `(I) I have brought some things for you.`,
    en_split: `I - have brought - some - things - for - you`,
    en_pos: `Pronoun - Verb - Adjective - Noun - Preposition - Pronoun`,
    vi: `(I) T√¥i mang ƒë·∫øn cho ng√†i m·ªôt √≠t ƒë·ªì.`,
    pinyin: `(Yƒ´) W«í gƒõi n√≠n shƒÅo l√°i le y√¨xiƒì d≈çngxi`
  },
  {
    cn_raw: `(ÁéãËÄÅÂ∏àÂíåÊûóËÄÅÂ∏àÈÉΩ‰ΩèÂú®Â≠¶Ê†°Èáå„ÄÇ`,
    cn_split: `ÁéãËÄÅÂ∏à - Âíå - ÊûóËÄÅÂ∏à - ÈÉΩ - ‰Ωè - Âú® - Â≠¶Ê†° - Èáå`,
    cn_pos: `Danh t·ª´ - Li√™n t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - Ph∆∞∆°ng v·ªã t·ª´`,
    en_raw: `(Teacher Wang and Teacher Lin both live in the school.`,
    en_split: `Teacher Wang - and - Teacher Lin - both - live - in - the - school`,
    en_pos: `Noun - Conjunction - Noun - Adverb - Verb - Preposition - Article - Noun`,
    vi: `(Th·∫ßy V∆∞∆°ng v√† c√¥ L√¢m ƒë·ªÅu s·ªëng trong tr∆∞·ªùng.`,
    pinyin: `(W√°ng l«éoshƒ´ h√© L√≠n l«éoshƒ´ d≈çu zh√π z√†i xu√©xi√†o l«ê.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÁªôÁéãËÄÅÂ∏àÊâìÊù•‰∫Ü‰∏™ÁîµËØù,`,
    cn_split: `ÊûóËÄÅÂ∏à - Áªô - ÁéãËÄÅÂ∏à - Êâì - Êù• - ‰∫Ü - ‰∏™ - ÁîµËØù`,
    cn_pos: `Danh t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´ - L∆∞·ª£ng t·ª´ - Danh t·ª´`,
    en_raw: `Teacher Lin made a phone call to Teacher Wang,`,
    en_split: `Teacher Lin - made - a - phone call - to - Teacher Wang`,
    en_pos: `Noun - Verb - Article - Noun - Preposition - Noun`,
    vi: `C√¥ L√¢m g·ªçi ƒëi·ªán tho·∫°i cho th·∫ßy V∆∞∆°ng,`,
    pinyin: `L√≠n l«éoshƒ´ gƒõi W√°ng l«éoshƒ´ d«é l√°i le g√® di√†nhu√†,`
  },
  {
    cn_raw: `ËØ¥Â•π‰ªéÂè∞ÊπæÂõûÊù•‰∫Ü,`,
    cn_split: `ËØ¥ - Â•π - ‰ªé - Âè∞Êπæ - Âõû - Êù• - ‰∫Ü`,
    cn_pos: `ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - ƒê·ªãa danh - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´`,
    en_raw: `said she has come back from Taiwan,`,
    en_split: `said - she - has come back - from - Taiwan`,
    en_pos: `Verb - Pronoun - Verb - Preposition - Noun`,
    vi: `n√≥i r·∫±ng c√¥ ·∫•y ƒë√£ t·ª´ ƒê√†i Loan v·ªÅ r·ªìi,`,
    pinyin: `shu≈ç tƒÅ c√≥ng T√°iwƒÅn hu√≠ l√°i le,`
  },
  {
    cn_raw: `ËøòÁªôÁéãËÄÅÂ∏àÂ∏¶Êù•‰∏Ä‰∫õ‰∏úË•ø,`,
    cn_split: `Ëøò - Áªô - ÁéãËÄÅÂ∏à - Â∏¶ - Êù• - ‰∏Ä‰∫õ - ‰∏úË•ø`,
    cn_pos: `Ph√≥ t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªãnh t·ª´ - Danh t·ª´`,
    en_raw: `and also brought some things for Teacher Wang,`,
    en_split: `and - also - brought - some - things - for - Teacher Wang`,
    en_pos: `Conjunction - Adverb - Verb - Adjective - Noun - Preposition - Noun`,
    vi: `c√≤n mang cho th·∫ßy V∆∞∆°ng m·ªôt √≠t ƒë·ªì,`,
    pinyin: `h√°i gƒõi W√°ng l«éoshƒ´ d√†i l√°i y√¨xiƒì d≈çngxi,`
  },
  {
    cn_raw: `Ë¶ÅÁªôÁéãËÄÅÂ∏àÈÄÅ`,
    cn_split: `Ë¶Å - Áªô - ÁéãËÄÅÂ∏à - ÈÄÅ`,
    cn_pos: `ƒê·ªông t·ª´ nƒÉng nguy·ªán - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´`,
    en_raw: `wanting to give them to Teacher Wang`,
    en_split: `wanting - to give - them - to - Teacher Wang`,
    en_pos: `Verb - Verb - Pronoun - Preposition - Noun`,
    vi: `mu·ªën mang t·∫∑ng th·∫ßy V∆∞∆°ng`,
    pinyin: `y√†o gƒõi W√°ng l«éoshƒ´ s√≤ng`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: ÁéãËÄÅÂ∏àÂêó?`,
    cn_split: `ÁéãËÄÅÂ∏à - Âêó`,
    cn_pos: `Danh t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Teacher Lin: Is that Teacher Wang?`,
    en_split: `Is - that - Teacher Wang`,
    en_pos: `Verb - Pronoun - Noun`,
    vi: `C√¥ L√¢m: Th·∫ßy V∆∞∆°ng ·∫°?`,
    pinyin: `L√≠n l«éoshƒ´: W√°ng l«éoshƒ´ ma?`
  },
  {
    cn_raw: `ÊàëÊòØÂ∞èÊûó„ÄÇ`,
    cn_split: `Êàë - ÊòØ - Â∞èÊûó`,
    cn_pos: `ƒê·∫°i t·ª´ - H·ªá t·ª´ - Danh t·ª´`,
    en_raw: `I am Xiao Lin.`,
    en_split: `I - am - Xiao Lin`,
    en_pos: `Pronoun - Verb - Noun`,
    vi: `Em l√† Ti·ªÉu L√¢m ƒë√¢y.`,
    pinyin: `W«í sh√¨ Xi«éo L√≠n.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: Âïä, Â∞èÊûó„ÄÇ`,
    cn_split: `Âïä - Â∞èÊûó`,
    cn_pos: `Th√°n t·ª´ - Danh t·ª´`,
    en_raw: `Teacher Wang: Ah, Xiao Lin.`,
    en_split: `Ah - Xiao Lin`,
    en_pos: `Interjection - Noun`,
    vi: `Th·∫ßy V∆∞∆°ng: √Ä, Ti·ªÉu L√¢m.`,
    pinyin: `W√°ng l«éoshƒ´: √Ä, Xi«éo L√≠n.`
  },
  {
    cn_raw: `‰Ω†‰∏çÊòØÂà∞Âè∞ÊπæÂºÄÊ±âËØ≠ÊïôÂ≠¶Á†îËÆ®‰ºöÂéª‰∫ÜÂêó?`,
    cn_split: `‰Ω† - ‰∏çÊòØ - Âà∞ - Âè∞Êπæ - ÂºÄ - Ê±âËØ≠ - ÊïôÂ≠¶ - Á†îËÆ®‰ºö - Âéª - ‰∫Ü - Âêó`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - Gi·ªõi t·ª´ - ƒê·ªãa danh - ƒê·ªông t·ª´ - Danh t·ª´ - Danh t·ª´ - Danh t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´ - Tr·ª£ t·ª´`,
    en_raw: `Didn't you go to Taiwan to hold a Chinese teaching seminar?`,
    en_split: `Didn't - you - go - to - Taiwan - to hold - a - seminar`,
    en_pos: `Verb - Pronoun - Verb - Preposition - Noun - Verb - Article - Noun`,
    vi: `Ch·∫≥ng ph·∫£i em ƒëi ƒê√†i Loan d·ª± h·ªôi th·∫£o gi·∫£ng d·∫°y ti·∫øng H√°n r·ªìi sao?`,
    pinyin: `N«ê b√∫sh√¨ d√†o T√°iwƒÅn kƒÅi H√†ny«î ji√†oxu√© y√°nt«éohu√¨ q√π le ma?`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: ÊàëÂºÄÂÆå‰ºöÂõûÊù•‰∫Ü„ÄÇ`,
    cn_split: `Êàë - ÂºÄ - ÂÆå - ‰ºö - Âõû - Êù• - ‰∫Ü`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ k·∫øt qu·∫£ - Danh t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´`,
    en_raw: `Teacher Lin: I've come back after finishing the meeting.`,
    en_split: `I - have come back - after - finishing - the - meeting`,
    en_pos: `Pronoun - Verb - Preposition - Verb - Article - Noun`,
    vi: `C√¥ L√¢m: Em h·ªçp xong v·ªÅ r·ªìi ·∫°.`,
    pinyin: `L√≠n l«éoshƒ´: W«í kƒÅi w√°n hu√¨ hu√≠ l√°i le.`
  },
  {
    cn_raw: `Êò®Â§©Êôö‰∏äÂàöÂà∞ÂÆ∂„ÄÇ`,
    cn_split: `Êò®Â§© - Êôö‰∏ä - Âàö - Âà∞ - ÂÆ∂`,
    cn_pos: `Danh t·ª´ (th·ªùi gian) - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ (ƒë·ªãa ƒëi·ªÉm)`,
    en_raw: `I just arrived home last night.`,
    en_split: `I - just - arrived - home - last - night`,
    en_pos: `Pronoun - Adverb - Verb - Noun - Adjective - Noun`,
    vi: `T·ªëi qua m·ªõi v·ª´a v·ªÅ ƒë·∫øn nh√†.`,
    pinyin: `Zu√≥tiƒÅn w«énshang gƒÅng d√†o jiƒÅ.`
  },
  {
    cn_raw: `ÊàëÂõûÊù•ÁöÑÊó∂ÂÄô, ÁªèËøáÈ¶ôÊ∏Ø,`,
    cn_split: `Êàë - Âõû - Êù• - ÁöÑ - Êó∂ÂÄô - ÁªèËøá - È¶ôÊ∏Ø`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - ƒê·ªãa danh`,
    en_raw: `When I came back, passing through Hong Kong,`,
    en_split: `When - I - came - back - passing - through - Hong Kong`,
    en_pos: `Conjunction - Pronoun - Verb - Adverb - Verb - Preposition - Noun`,
    vi: `L√∫c em v·ªÅ, c√≥ ƒëi qua H·ªìng K√¥ng,`,
    pinyin: `W«í hu√≠ l√°i de sh√≠hou, jƒ´nggu√≤ XiƒÅngg«éng,`
  },
  {
    cn_raw: `Âà∞Â∞èËµµÂÆ∂ÂéªÁúã‰∫ÜÁúã„ÄÇ`,
    cn_split: `Âà∞ - Â∞èËµµ - ÂÆ∂ - Âéª - Áúã - ‰∫Ü - Áúã`,
    cn_pos: `Gi·ªõi t·ª´ - Danh t·ª´ - Danh t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - ƒê·ªông t·ª´`,
    en_raw: `I went to Xiao Zhao's house to visit.`,
    en_split: `I - went - to - Xiao Zhao's - house - to - visit`,
    en_pos: `Pronoun - Verb - Preposition - Noun - Noun - Verb`,
    vi: `gh√© qua nh√† Ti·ªÉu Tri·ªáu thƒÉm m·ªôt ch√∫t.`,
    pinyin: `d√†o Xi«éo Zh√†o jiƒÅ q√π k√†n le k√†n.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ÊòØÂêó?`,
    cn_split: `ÊòØ - Âêó`,
    cn_pos: `H·ªá t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Teacher Wang: Is that so?`,
    en_split: `Is - that - so`,
    en_pos: `Verb - Pronoun - Adverb`,
    vi: `Th·∫ßy V∆∞∆°ng: Th·∫ø √†?`,
    pinyin: `W√°ng l«éoshƒ´: Sh√¨ ma?`
  },
  {
    cn_raw: `Â∞èËµµÂ•ΩÂêó?`,
    cn_split: `Â∞èËµµ - Â•Ω - Âêó`,
    cn_pos: `Danh t·ª´ - T√≠nh t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `How is Xiao Zhao?`,
    en_split: `How - is - Xiao Zhao`,
    en_pos: `Adverb - Verb - Noun`,
    vi: `Ti·ªÉu Tri·ªáu kh·ªèe kh√¥ng?`,
    pinyin: `Xi«éo Zh√†o h«éo ma?`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: Êå∫Â•ΩÁöÑ„ÄÇ`,
    cn_split: `Êå∫ - Â•Ω - ÁöÑ`,
    cn_pos: `Ph√≥ t·ª´ - T√≠nh t·ª´ - Tr·ª£ t·ª´`,
    en_raw: `Teacher Lin: She is very well.`,
    en_split: `She - is - very - well`,
    en_pos: `Pronoun - Verb - Adverb - Adjective`,
    vi: `C√¥ L√¢m: R·∫•t t·ªët ·∫°.`,
    pinyin: `L√≠n l«éoshƒ´: T«êng h«éo de.`
  },
  {
    cn_raw: `Â•πËÆ©ÊàëÂêëÊÇ®ÈóÆÂ•Ω,`,
    cn_split: `Â•π - ËÆ© - Êàë - Âêë - ÊÇ® - ÈóÆÂ•Ω`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ (sai khi·∫øn) - ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´`,
    en_raw: `She asked me to say hello to you,`,
    en_split: `She - asked - me - to say - hello - to - you`,
    en_pos: `Pronoun - Verb - Pronoun - Verb - Noun - Preposition - Pronoun`,
    vi: `C√¥ ·∫•y nh·ªù em g·ª≠i l·ªùi h·ªèi thƒÉm th·∫ßy,`,
    pinyin: `TƒÅ r√†ng w«í xi√†ng n√≠n w√®nh«éo,`
  },
  {
    cn_raw: `ËøòËÆ©ÊàëÁªôÊÇ®ÊçéÊù•‰∏Ä‰∫õ‰∏úË•ø„ÄÇ`,
    cn_split: `Ëøò - ËÆ© - Êàë - Áªô - ÊÇ® - Êçé - Êù• - ‰∏Ä‰∫õ - ‰∏úË•ø`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªãnh t·ª´ - Danh t·ª´`,
    en_raw: `and also asked me to bring some things for you.`,
    en_split: `and - also - asked - me - to bring - some - things - for - you`,
    en_pos: `Conjunction - Adverb - Verb - Pronoun - Verb - Adjective - Noun - Preposition - Pronoun`,
    vi: `c√≤n nh·ªù em mang cho th·∫ßy √≠t ƒë·ªì.`,
    pinyin: `h√°i r√†ng w«í gƒõi n√≠n shƒÅo l√°i y√¨xiƒì d≈çngxi.`
  },
  {
    cn_raw: `ÊàëÊÉ≥ÁªôÊÇ®ÈÄÅÂéª„ÄÇ`,
    cn_split: `Êàë - ÊÉ≥ - Áªô - ÊÇ® - ÈÄÅ - Âéª`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng`,
    en_raw: `I want to send them over to you.`,
    en_split: `I - want - to send - them - to - you`,
    en_pos: `Pronoun - Verb - Verb - Pronoun - Preposition - Pronoun`,
    vi: `Em mu·ªën mang sang bi·∫øu th·∫ßy.`,
    pinyin: `W«í xi«éng gƒõi n√≠n s√≤ng q√π.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ÊàëËøáÂéªÂèñÂêß„ÄÇ`,
    cn_split: `Êàë - Ëøá - Âéª - Âèñ - Âêß`,
    cn_pos: `ƒê·∫°i t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `Teacher Wang: I will go over to get them.`,
    en_split: `I - will - go - over - to - get - them`,
    en_pos: `Pronoun - Auxiliary - Verb - Adverb - Particle - Verb - Pronoun`,
    vi: `Th·∫ßy V∆∞∆°ng: ƒê·ªÉ th·∫ßy qua l·∫•y cho.`,
    pinyin: `W√°ng l«éoshƒ´: W«í gu√≤ q√π q«î ba.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: ‰∏çÁî®„ÄÇ`,
    cn_split: `‰∏çÁî®`,
    cn_pos: `Ph√≥ t·ª´ ph·ªß ƒë·ªãnh`,
    en_raw: `Teacher Lin: No need.`,
    en_split: `No - need`,
    en_pos: `Adverb - Noun`,
    vi: `C√¥ L√¢m: Kh√¥ng c·∫ßn ƒë√¢u ·∫°.`,
    pinyin: `L√≠n l«éoshƒ´: B√∫y√≤ng.`
  },
  {
    cn_raw: `ÊàëÊ≠£Â•ΩË¶Å‰∏ãÊ•ºÂéª,`,
    cn_split: `Êàë - Ê≠£Â•Ω - Ë¶Å - ‰∏ã - Ê•º - Âéª`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - Danh t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng`,
    en_raw: `I just happen to be going downstairs,`,
    en_split: `I - just - happen - to be - going - downstairs`,
    en_pos: `Pronoun - Adverb - Verb - Verb - Verb - Adverb`,
    vi: `Em v·ª´a kh√©o ƒëang ƒë·ªãnh xu·ªëng l·∫ßu,`,
    pinyin: `W«í zh√®ngh«éo y√†o xi√† l√≥u q√π,`
  },
  {
    cn_raw: `È°∫‰æøÂ∞±ÁªôÊÇ®Â∏¶Âéª‰∫Ü„ÄÇ`,
    cn_split: `È°∫‰æø - Â∞± - Áªô - ÊÇ® - Â∏¶ - Âéª - ‰∫Ü`,
    cn_pos: `Ph√≥ t·ª´ - Ph√≥ t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´`,
    en_raw: `so I will bring them to you on the way.`,
    en_split: `so - I - will - bring - them - to - you - on the way`,
    en_pos: `Conjunction - Pronoun - Auxiliary - Verb - Pronoun - Preposition - Pronoun - Adverb`,
    vi: `ti·ªán ƒë∆∞·ªùng mang qua cho th·∫ßy lu√¥n.`,
    pinyin: `sh√πnbi√†n ji√π gƒõi n√≠n d√†i q√π le.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ÈÇ£Â•Ω, ‰Ω†ËøáÊù•Âêß„ÄÇ`,
    cn_split: `ÈÇ£ - Â•Ω - ‰Ω† - Ëøá - Êù• - Âêß`,
    cn_pos: `ƒê·∫°i t·ª´ - T√≠nh t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `Teacher Wang: That's good, you come over.`,
    en_split: `That - is - good - you - come - over`,
    en_pos: `Pronoun - Verb - Adjective - Pronoun - Verb - Adverb`,
    vi: `Th·∫ßy V∆∞∆°ng: V·∫≠y ƒë∆∞·ª£c, em qua ƒë√¢y ƒëi.`,
    pinyin: `W√°ng l«éoshƒ´: N√† h«éo, n«ê gu√≤ l√°i ba.`
  },
  {
    cn_raw: `(ÁéãËÄÅÂ∏àÂÆ∂Èó®Âè£)`,
    cn_split: `ÁéãËÄÅÂ∏à - ÂÆ∂ - Èó®Âè£`,
    cn_pos: `Danh t·ª´ - Danh t·ª´ - Danh t·ª´`,
    en_raw: `(At Teacher Wang's doorstep)`,
    en_split: `At - Teacher Wang's - doorstep`,
    en_pos: `Preposition - Noun - Noun`,
    vi: `(Tr∆∞·ªõc c·ª≠a nh√† th·∫ßy V∆∞∆°ng)`,
    pinyin: `(W√°ng l«éoshƒ´ jiƒÅ m√©nk«íu)`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ËæõËã¶‰∫Ü!`,
    cn_split: `ËæõËã¶ - ‰∫Ü`,
    cn_pos: `T√≠nh t·ª´ - Tr·ª£ t·ª´`,
    en_raw: `Teacher Wang: You've worked hard!`,
    en_split: `You - have - worked - hard`,
    en_pos: `Pronoun - Auxiliary - Verb - Adverb`,
    vi: `Th·∫ßy V∆∞∆°ng: V·∫•t v·∫£ cho em qu√°!`,
    pinyin: `W√°ng l«éoshƒ´: Xƒ´nk«î le!`
  },
  {
    cn_raw: `ËøòÈ∫ªÁÉ¶‰Ω†Ë∑ë‰∏ÄË∂ü„ÄÇ`,
    cn_split: `Ëøò - È∫ªÁÉ¶ - ‰Ω† - Ë∑ë - ‰∏Ä - Ë∂ü`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - S·ªë t·ª´ - L∆∞·ª£ng t·ª´`,
    en_raw: `Still troubling you to make a trip.`,
    en_split: `Still - troubling - you - to make - a - trip`,
    en_pos: `Adverb - Verb - Pronoun - Verb - Article - Noun`,
    vi: `C√≤n l√†m phi·ªÅn em ch·∫°y m·ªôt chuy·∫øn.`,
    pinyin: `H√°i m√°fan n«ê p«éo y√≠ t√†ng.`
  },
  {
    cn_raw: `Â§ñËæπÂÜ∑, Âø´ËøõÂ±ãÊù•ÂùêÂêß„ÄÇ`,
    cn_split: `Â§ñËæπ - ÂÜ∑ - Âø´ - Ëøõ - Â±ã - Êù• - Âùê - Âêß`,
    cn_pos: `Danh t·ª´ (v·ªã tr√≠) - T√≠nh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Tr·ª£ t·ª´`,
    en_raw: `It's cold outside, come in the room and sit quickly.`,
    en_split: `It - is - cold - outside - come - inside - and - sit`,
    en_pos: `Pronoun - Verb - Adjective - Adverb - Verb - Adverb - Conjunction - Verb`,
    vi: `Ngo√†i tr·ªùi l·∫°nh, mau v√†o nh√† ng·ªìi ƒëi.`,
    pinyin: `W√†ibian lƒõng, ku√†i j√¨n w≈´ l√°i zu√≤ ba.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: ‰∏çËøõÂéª‰∫Ü„ÄÇ`,
    cn_split: `‰∏ç - Ëøõ - Âéª - ‰∫Ü`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - Tr·ª£ t·ª´`,
    en_raw: `Teacher Lin: I won't go in.`,
    en_split: `I - will - not - go - in`,
    en_pos: `Pronoun - Auxiliary - Adverb - Verb - Adverb`,
    vi: `C√¥ L√¢m: Em kh√¥ng v√†o n·ªØa ƒë√¢u ·∫°.`,
    pinyin: `L√≠n l«éoshƒ´: B√∫ j√¨n q√π le.`
  },
  {
    cn_raw: `ÊàëÁà±‰∫∫ËøòÂú®Ê•º‰∏ãÁ≠âÊàëÂë¢,`,
    cn_split: `Êàë - Áà±‰∫∫ - Ëøò - Âú® - Ê•º‰∏ã - Á≠â - Êàë - Âë¢`,
    cn_pos: `ƒê·∫°i t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ (v·ªã tr√≠) - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ t·ª´`,
    en_raw: `My husband is still waiting for me downstairs,`,
    en_split: `My - husband - is - still - waiting - for - me - downstairs`,
    en_pos: `Adjective - Noun - Verb - Adverb - Verb - Preposition - Pronoun - Adverb`,
    vi: `Nh√† em c√≤n ƒëang ƒë·ª£i em d∆∞·ªõi l·∫ßu,`,
    pinyin: `W«í √†iren h√°i z√†i l√≥uxi√† dƒõng w«í ne,`
  },
  {
    cn_raw: `Êàë‰ª¨Ë¶ÅÂá∫ÂéªÂäûÁÇπÂÑø‰∫ã„ÄÇ`,
    cn_split: `Êàë‰ª¨ - Ë¶Å - Âá∫ - Âéª - Âäû - ÁÇπÂÑø - ‰∫ã`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - B·ªï ng·ªØ xu h∆∞·ªõng - ƒê·ªông t·ª´ - ƒê·ªãnh t·ª´ - Danh t·ª´`,
    en_raw: `we need to go out to do some errands.`,
    en_split: `we - need - to go - out - to do - some - errands`,
    en_pos: `Pronoun - Verb - Verb - Adverb - Verb - Adjective - Noun`,
    vi: `ch√∫ng em ph·∫£i ƒëi gi·∫£i quy·∫øt ch√∫t vi·ªác.`,
    pinyin: `w«ímen y√†o ch≈´ q√π b√†n di«énr sh√¨.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ÊàëÈÄÅÈÄÅ‰Ω†„ÄÇ`,
    cn_split: `Êàë - ÈÄÅ - ÈÄÅ - ‰Ω†`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´`,
    en_raw: `Teacher Wang: I'll see you out.`,
    en_split: `I - will - see - you - out`,
    en_pos: `Pronoun - Auxiliary - Verb - Pronoun - Adverb`,
    vi: `Th·∫ßy V∆∞∆°ng: Th·∫ßy ti·ªÖn em.`,
    pinyin: `W√°ng l«éoshƒ´: W«í s√≤ngsong n«ê.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏à: ‰∏çÁî®ÈÄÅ‰∫Ü, ËØ∑ÂõûÂêß„ÄÇ`,
    cn_split: `‰∏çÁî® - ÈÄÅ - ‰∫Ü - ËØ∑ - Âõû - Âêß`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `Teacher Lin: No need to see me out, please go back.`,
    en_split: `No - need - to see - me - out - please - go - back`,
    en_pos: `Adverb - Noun - Verb - Pronoun - Adverb - Adverb - Verb - Adverb`,
    vi: `C√¥ L√¢m: Kh√¥ng c·∫ßn ti·ªÖn ƒë√¢u ·∫°, th·∫ßy v√†o nh√† ƒëi.`,
    pinyin: `L√≠n l«éoshƒ´: B√∫y√≤ng s√≤ng le, q«êng hu√≠ ba.`
  },
  {
    cn_raw: `ÁéãËÄÅÂ∏à: ÊÖ¢Ëµ∞!`,
    cn_split: `ÊÖ¢ - Ëµ∞`,
    cn_pos: `T√≠nh t·ª´ - ƒê·ªông t·ª´`,
    en_raw: `Teacher Wang: Take care!`,
    en_split: `Take - care`,
    en_pos: `Verb - Noun`,
    vi: `Th·∫ßy V∆∞∆°ng: ƒêi thong th·∫£ nh√©!`,
    pinyin: `W√°ng l«éoshƒ´: M√†n z«íu!`
  }
];
// C·∫≠p nh·∫≠t h√†m render ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu an to√†n h∆°n
function renderBook() {
    const container = document.getElementById('bookContent');
    sentences.forEach((s, i) => {
        const item = document.createElement('div');
        item.className = 'sentence-item';
        item.innerHTML = `
            <div class="text-content">
                <div class="row-cn">
                    <span id="cn-txt-${i}">${s.cn_raw}</span>
                </div>
                <div id="cn-pos-${i}" class="pos-tag hidden">${s.cn_pos}</div>
                <div id="pinyin-${i}" class="pinyin-row hidden">${s.pinyin || ''}</div>
                <div class="row-en">
                    <span id="en-txt-${i}">${s.en_raw}</span>
                </div>
                <div id="en-pos-${i}" class="pos-tag hidden">${s.en_pos}</div>
                <div class="row-vi">${s.vi}</div>
            </div>
            <div class="control-sidebar">
                <button class="btn-icon" onclick="playSpeech(${i}, 'cn')">‚ôò</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'cn')">‚ôî</button>
                <button class="btn-icon" onclick="playSpeech(${i}, 'en')">‚ôñ</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'en')">‚ôï</button>
            </div>
        `;
        container.appendChild(item);
    });
}
// H√†m ph√°t √¢m m·ªõi: L·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ m·∫£ng thay v√¨ truy·ªÅn chu·ªói qua HTML
// H√†m ph√°t √¢m: T·ª± ƒë·ªông duy tr√¨ ng√¥n ng·ªØ ƒëang ch·ªçn
function playSpeech(index, langType) {
    // 1. D·ª´ng m·ªçi √¢m thanh ƒëang ph√°t ƒë·ªÉ tr√°nh ch·ªìng ch√©o
    window.speechSynthesis.cancel(); 

    let textToRead = "";
    let langCode = "";

    // 2. X√°c ƒë·ªãnh n·ªôi dung v√† m√£ ng√¥n ng·ªØ d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    if (langType === 'cn') {
        textToRead = sentences[index].cn_raw;
        langCode = 'zh-CN';
    } else {
        textToRead = sentences[index].en_raw;
        langCode = 'en-US';
    }

    const msg = new SpeechSynthesisUtterance();
    msg.text = textToRead;
    msg.lang = langCode;
    msg.rate = document.getElementById('rate').value;
    
    // 3. Hi·ªáu ·ª©ng Highlight: T√¥ m√†u c√¢u ƒëang ƒë·ªçc ƒë·ªÉ d·ªÖ theo d√µi
    const allItems = document.getElementsByClassName('sentence-item');
    // X√≥a m√†u c·ªßa t·∫•t c·∫£ c√°c c√¢u kh√°c
    Array.from(allItems).forEach(item => item.style.backgroundColor = "transparent");
    // T√¥ m√†u v√†ng nh·∫°t cho c√¢u hi·ªán t·∫°i
    allItems[index].style.backgroundColor = "rgba(230, 126, 34, 0.1)";

    // 4. X·ª≠ l√Ω khi k·∫øt th√∫c c√¢u
    msg.onend = () => {
        const isAuto = document.getElementById('autoNext').checked;
        if (isAuto && index < sentences.length - 1) {
            setTimeout(() => {
                // QUAN TR·ªåNG: Truy·ªÅn ƒë√∫ng langType hi·ªán t·∫°i v√†o l·∫ßn g·ªçi ti·∫øp theo
                playSpeech(index + 1, langType); 
                
                // T·ª± ƒë·ªông cu·ªôn m√†n h√¨nh ƒë·∫øn c√¢u ti·∫øp theo
                allItems[index + 1].scrollIntoView({
                    behavior: "smooth", 
                    block: "center"
                });
            }, 500); // Ngh·ªâ 0.5 gi√¢y gi·ªØa c√°c c√¢u ƒë·ªÉ ng∆∞·ªùi d√πng k·ªãp ng·∫•m
        }
    };

    window.speechSynthesis.speak(msg);
}
function toggleMode(index, lang) {
    const txtSpan = document.getElementById(`${lang}-txt-${index}`);
    const posSpan = document.getElementById(`${lang}-pos-${index}`);
    const isOriginal = txtSpan.innerText === sentences[index][`${lang}_raw`];

    txtSpan.innerText = isOriginal ? sentences[index][`${lang}_split`] : sentences[index][`${lang}_raw`];
    posSpan.classList.toggle('hidden');
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

function toggleAllPinyin() {
    // 1. L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class l√† pinyin-row
    const pinyinElements = document.getElementsByClassName('pinyin-row');
    
    // 2. Ki·ªÉm tra n·∫øu kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o (b√°o l·ªói ra Console ƒë·ªÉ ki·ªÉm tra)
    if (pinyinElements.length === 0) {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o c√≥ class 'pinyin-row'");
        return;
    }

    // 3. Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ v√† b·∫≠t/t·∫Øt class 'hidden'
    for (let i = 0; i < pinyinElements.length; i++) {
        pinyinElements[i].classList.toggle('hidden');
    }
}

function speak(text, lang, index) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    msg.rate = document.getElementById('rate').value;

    msg.onend = () => {
        if (document.getElementById('autoNext').checked && index < sentences.length - 1) {
            setTimeout(() => {
                speak(sentences[index + 1].cn_raw, 'zh-CN', index + 1);
                document.getElementsByClassName('sentence-item')[index+1].scrollIntoView({behavior: "smooth", block: "center"});
            }, 1200);
        }
    };
    window.speechSynthesis.speak(msg);
}

renderBook();
</script>
</body>
</html>