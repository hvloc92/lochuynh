<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√°ch ƒêa Ng√¥n Ng·ªØ</title>
    <style>
        :root {
            --bg-body: #dcdcdc;
            --bg-book: #f4f1ea;
            --text-main: #1a1a1a;
            --text-sub: #555;
            --accent: #e67e22;
            --border: #d1ccc0;
        }

        /* Ch·∫ø ƒë·ªô Dark Mode */
        .dark-mode {
            --bg-body: #1a1a1b;
            --bg-book: #2c2c2e;
            --text-main: #e1e1e1;
            --text-sub: #b0b0b0;
            --accent: #f39c12;
            --border: #444;
        }

        body { 
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .book-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-book);
            min-height: 100vh;
            padding-top: 20px;
        }

        .sentence-item {
            display: flex;
            padding: 20px 5%; /* L·ªÅ tr√°i 5% theo y√™u c·∫ßu */
            border-bottom: 1px solid var(--border);
            word-wrap: break-word; /* T·ª± ƒë·ªông xu·ªëng d√≤ng */
        }

        .text-content {
            flex: 1;
            padding-right: 15px;
        }

        .row-cn { font-size: 1.8rem; font-weight: normal; margin-bottom: 8px; line-height: 1.4; }
        .row-en { font-size: 1.2rem; margin-bottom: 5px; color: var(--text-main); opacity: 0.9; }
        .row-vi { font-size: 1rem; color: var(--text-sub); font-style: italic; }
        
        .pos-tag { font-size: 0.85rem; color: var(--accent); display: block; margin-top: 4px; font-weight: normal; }

        /* Ph√≠m ch·ª©c nƒÉng d·∫°ng c·ªôt icon */
        .control-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: 0.2s;
        }
        .btn-icon:hover { background: #eee; transform: scale(1.1); }

        /* Menu n·ªïi c·ªë ƒë·ªãnh ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }

        .settings-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            color: #333;
            font-size: 14px;
        }

        .show-settings .settings-box { display: block; }

        .btn-main-float {
            width: 50px;
            height: 50px;
            background: #34495e;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

	/* Th√™m v√†o trong th·∫ª <style> */
	.pinyin-row {
    		font-size: 16px;
		font-weight: normal;
   		color: #27ae60; /* M√†u xanh l√° d·ªãu m·∫Øt */
    		display: block;
    		margin-top: 2px;
	}


        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="book-container" id="bookContent">
    </div>

<div class="floating-menu" id="floatMenu">
    <div class="settings-box">
        <strong>‚öôÔ∏è C√†i ƒë·∫∑t</strong><hr>
        T·ªëc ƒë·ªô: <input type="range" id="rate" min="0.5" max="1.3" step="0.1" value="0.9" style="width: 100px;"><br>
        <label><input type="checkbox" id="autoNext"> T·ª± ƒë·ªông chuy·ªÉn</label><br>
	<button onclick="toggleAllPinyin()" style="width: 100%; margin-top: 10px;">üî§ ·∫®n/Hi·ªán Pinyin</button>
        <button onclick="toggleDarkMode()" style="width: 100%; margin-top: 10px;">üåô Dark Mode</button>
    </div>
    <button class="btn-main-float" onclick="document.getElementById('floatMenu').classList.toggle('show-settings')">üõ†Ô∏è</button>
</div>

<script>
const sentences = [
  {
    cn_raw: `ÈÄõÂÖ¨Âõ≠`,
    cn_split: `ÈÄõ  -  ÂÖ¨Âõ≠`,
    cn_pos: `v  -  n`,
    en_raw: `Strolling in the park`,
    en_split: `Strolling  -  in  -  the  -  park`,
    en_pos: `v  -  prep  -  art  -  n`,
    vi: `D·∫°o c√¥ng vi√™n`,
    pinyin: `Gu√†ng g≈çngyu√°n`
  },
  {
    cn_raw: `Êò®Â§©Êôö‰∏äÊàëÂØπÁΩóÂÖ∞ËØ¥,Âê¨ËØ¥Êàë‰ª¨Â≠¶Ê†°Ë•øËæπÊúâ‰∏™ÂÖ¨Âõ≠,ÈÇ£‰∏™ÂÖ¨Âõ≠ÂæàÂ§ß„ÄÇ`,
    cn_split: `Êò®Â§©  -  Êôö‰∏ä  -  Êàë  -  ÂØπ  -  ÁΩóÂÖ∞  -  ËØ¥  -  Âê¨ËØ¥  -  Êàë‰ª¨  -  Â≠¶Ê†°  -  Ë•øËæπ  -  Êúâ  -  ‰∏™  -  ÂÖ¨Âõ≠  -  ÈÇ£‰∏™  -  ÂÖ¨Âõ≠  -  Âæà  -  Â§ß`,
    cn_pos: `n  -  n  -  pron  -  prep  -  n  -  v  -  v  -  pron  -  n  -  n  -  v  -  mw  -  n  -  pron  -  n  -  adv  -  adj`,
    en_raw: `Yesterday evening I said to Roland, I heard there is a park west of our school, that park is very large.`,
    en_split: `Yesterday  -  evening  -  I  -  said  -  to  -  Roland  -  I  -  heard  -  there  -  is  -  a  -  park  -  west  -  of  -  our  -  school  -  that  -  park  -  is  -  very  -  large`,
    en_pos: `n  -  n  -  pron  -  v  -  prep  -  n  -  pron  -  v  -  adv  -  v  -  art  -  n  -  n  -  prep  -  pron  -  n  -  det  -  n  -  v  -  adv  -  adj`,
    vi: `T·ªëi h√¥m qua t√¥i n√≥i v·ªõi Roland, nghe n√≥i ph√≠a t√¢y tr∆∞·ªùng m√¨nh c√≥ m·ªôt c√°i c√¥ng vi√™n, c√¥ng vi√™n ƒë√≥ r·∫•t l·ªõn.`,
    pinyin: `Zu√≥tiƒÅn w«énsh√†ng w«í du√¨ Lu√≥l√°n shu≈ç, tƒ´ng shu≈ç w«ímen xu√©xi√†o xƒ´biƒÅn y«íu g√® g≈çngyu√°n, n√†g√® g≈çngyu√°n hƒõn d√†.`
  },
  {
    cn_raw: `ÂÖ¨Âõ≠ÈáåÊúâÂ±±ÊúâÊ∞¥,ÂæàÊºÇ‰∫Æ„ÄÇ`,
    cn_split: `ÂÖ¨Âõ≠  -  Èáå  -  Êúâ  -  Â±±  -  Êúâ  -  Ê∞¥  -  Âæà  -  ÊºÇ‰∫Æ`,
    cn_pos: `n  -  n  -  v  -  n  -  v  -  n  -  adv  -  adj`,
    en_raw: `There are mountains and water in the park, it is very beautiful.`,
    en_split: `There  -  are  -  mountains  -  and  -  water  -  in  -  the  -  park  -  it  -  is  -  very  -  beautiful`,
    en_pos: `adv  -  v  -  n  -  conj  -  n  -  prep  -  art  -  n  -  pron  -  v  -  adv  -  adj`,
    vi: `Trong c√¥ng vi√™n c√≥ n√∫i c√≥ n∆∞·ªõc, r·∫•t ƒë·∫πp.`,
    pinyin: `G≈çngyu√°n l«ê y«íu shƒÅn y«íu shu«ê, hƒõn pi√†oliang.`
  },
  {
    cn_raw: `ÊòéÂ§©ÊòØÊòüÊúüÂÖ≠,Êàë‰ª¨ÂéªÂÖ¨Âõ≠Áé©Áé©ÂÑøÊÄé‰πàÊ†∑?`,
    cn_split: `ÊòéÂ§©  -  ÊòØ  -  ÊòüÊúüÂÖ≠  -  Êàë‰ª¨  -  Âéª  -  ÂÖ¨Âõ≠  -  Áé©Áé©ÂÑø  -  ÊÄé‰πàÊ†∑`,
    cn_pos: `n  -  v  -  n  -  pron  -  v  -  n  -  v  -  pron`,
    en_raw: `Tomorrow is Saturday, how about we go to the park to have some fun?`,
    en_split: `Tomorrow  -  is  -  Saturday  -  how  -  about  -  we  -  go  -  to  -  the  -  park  -  to  -  have  -  some  -  fun`,
    en_pos: `n  -  v  -  n  -  adv  -  prep  -  pron  -  v  -  prep  -  art  -  n  -  part  -  v  -  det  -  n`,
    vi: `Ng√†y mai l√† th·ª© b·∫£y, ch√∫ng ta ƒëi c√¥ng vi√™n ch∆°i m·ªôt ch√∫t th·∫•y th·∫ø n√†o?`,
    pinyin: `M√≠ngtiƒÅn sh√¨ xƒ´ngqƒ´li√π, w«ímen q√π g≈çngyu√°n w√°nw√°nr zƒõnmey√†ng?`
  },
  {
    cn_raw: `ÁΩóÂÖ∞ËØ¥,Â•π‰πüÊ≠£ÊÉ≥ÂéªÂÖ¨Âõ≠Êï£Êï£Ê≠•Âë¢„ÄÇ`,
    cn_split: `ÁΩóÂÖ∞  -  ËØ¥  -  Â•π  -  ‰πü  -  Ê≠£  -  ÊÉ≥  -  Âéª  -  ÂÖ¨Âõ≠  -  Êï£Êï£Ê≠•  -  Âë¢`,
    cn_pos: `n  -  v  -  pron  -  adv  -  adv  -  v  -  v  -  n  -  v  -  part`,
    en_raw: `Roland said, she also just wanted to go to the park for a stroll.`,
    en_split: `Roland  -  said  -  she  -  also  -  just  -  wanted  -  to  -  go  -  to  -  the  -  park  -  for  -  a  -  stroll`,
    en_pos: `n  -  v  -  pron  -  adv  -  adv  -  v  -  part  -  v  -  prep  -  art  -  n  -  prep  -  art  -  n`,
    vi: `Roland n√≥i, c√¥ ·∫•y c≈©ng ƒëang mu·ªën ƒëi c√¥ng vi√™n ƒëi d·∫°o ƒë√¢y.`,
    pinyin: `Lu√≥l√°n shu≈ç, tƒÅ yƒõ zh√®ng xi«éng q√π g≈çngyu√°n s√†ns√†nb√π ne.`
  },
  {
    cn_raw: `ÊàëÈóÆÁΩóÂÖ∞ÊÄé‰πàÂéª,ÁΩóÂÖ∞ËØ¥,ÊòüÊúüÂÖ≠ÂùêÂÖ¨ÂÖ±Ê±ΩËΩ¶ÁöÑ‰∫∫ÊØîËæÉÂ§ö,Êàë‰ª¨ÊúÄÂ•ΩÈ™ëËá™Ë°åËΩ¶Âéª,ËøòÂèØ‰ª•ÈîªÁÇºË∫´‰Ωì„ÄÇ`,
    cn_split: `Êàë  -  ÈóÆ  -  ÁΩóÂÖ∞  -  ÊÄé‰πà  -  Âéª  -  ÁΩóÂÖ∞  -  ËØ¥  -  ÊòüÊúüÂÖ≠  -  Âùê  -  ÂÖ¨ÂÖ±Ê±ΩËΩ¶  -  ÁöÑ  -  ‰∫∫  -  ÊØîËæÉ  -  Â§ö  -  Êàë‰ª¨  -  ÊúÄÂ•Ω  -  È™ë  -  Ëá™Ë°åËΩ¶  -  Âéª  -  Ëøò  -  ÂèØ‰ª•  -  ÈîªÁÇº  -  Ë∫´‰Ωì`,
    cn_pos: `pron  -  v  -  n  -  pron  -  v  -  n  -  v  -  n  -  v  -  n  -  part  -  n  -  adv  -  adj  -  pron  -  adv  -  v  -  n  -  v  -  adv  -  v  -  v  -  n`,
    en_raw: `I asked Roland how to go, Roland said, there are more people taking the bus on Saturday, we had better go by bike, we can also exercise.`,
    en_split: `I  -  asked  -  Roland  -  how  -  to  -  go  -  Roland  -  said  -  there  -  are  -  more  -  people  -  taking  -  the  -  bus  -  on  -  Saturday  -  we  -  had  -  better  -  go  -  by  -  bike  -  we  -  can  -  also  -  exercise`,
    en_pos: `pron  -  v  -  n  -  adv  -  part  -  v  -  n  -  v  -  adv  -  v  -  adj  -  n  -  v  -  art  -  n  -  prep  -  n  -  pron  -  v  -  adv  -  v  -  prep  -  n  -  pron  -  v  -  adv  -  v`,
    vi: `T√¥i h·ªèi Roland ƒëi nh∆∞ th·∫ø n√†o, Roland n√≥i, ng∆∞·ªùi ƒëi xe bu√Ωt v√†o th·ª© b·∫£y kh√° ƒë√¥ng, ch√∫ng ta t·ªët nh·∫•t l√† ƒë·∫°p xe ƒëi, c√≤n c√≥ th·ªÉ r√®n luy·ªán th√¢n th·ªÉ.`,
    pinyin: `W«í w√®n Lu√≥l√°n zƒõnme q√π, Lu√≥l√°n shu≈ç, xƒ´ngqƒ´li√π zu√≤ g≈çngg√≤ng q√¨chƒì de r√©n b«êji√†o du≈ç, w«ímen zu√¨h«éo q√≠ z√¨x√≠ngchƒì q√π, h√°i kƒõy«ê du√†nli√†n shƒìnt«ê.`
  },
  {
    cn_raw: `‰ªäÂ§©Êó©‰∏ä,Êàë‰ª¨Ëµ∑ÂæóÂæàÊó©,ÂêÉ‰∫ÜÊó©È•≠Â∞±Âá∫Âèë‰∫Ü,Âçä‰∏™Â∞èÊó∂Â∞±Âà∞ÂÖ¨Âõ≠‰∫Ü„ÄÇ`,
    cn_split: `‰ªäÂ§©  -  Êó©‰∏ä  -  Êàë‰ª¨  -  Ëµ∑  -  Âæó  -  Âæà  -  Êó©  -  ÂêÉ  -  ‰∫Ü  -  Êó©È•≠  -  Â∞±  -  Âá∫Âèë  -  ‰∫Ü  -  Âçä  -  ‰∏™  -  Â∞èÊó∂  -  Â∞±  -  Âà∞  -  ÂÖ¨Âõ≠  -  ‰∫Ü`,
    cn_pos: `n  -  n  -  pron  -  v  -  part  -  adv  -  adj  -  v  -  part  -  n  -  adv  -  v  -  part  -  num  -  mw  -  n  -  adv  -  v  -  n  -  part`,
    en_raw: `This morning, we got up very early, set off after breakfast, and reached the park in half an hour.`,
    en_split: `This  -  morning  -  we  -  got  -  up  -  very  -  early  -  set  -  off  -  after  -  breakfast  -  and  -  reached  -  the  -  park  -  in  -  half  -  an  -  hour`,
    en_pos: `det  -  n  -  pron  -  v  -  adv  -  adv  -  adv  -  v  -  adv  -  prep  -  n  -  conj  -  v  -  art  -  n  -  prep  -  adj  -  art  -  n`,
    vi: `S√°ng s·ªõm h√¥m nay, ch√∫ng t√¥i d·∫≠y r·∫•t s·ªõm, ƒÉn s√°ng xong l√† xu·∫•t ph√°t ngay, n·ª≠a ti·∫øng ƒë·ªìng h·ªì l√† ƒë·∫øn c√¥ng vi√™n r·ªìi.`,
    pinyin: `Jƒ´nti√°n z«éosh√†ng, w«ímen q«ê de hƒõn z«éo, chƒ´le z«éof√†n ji√π ch≈´fƒÅle, b√†n g√® xi«éosh√≠ ji√π d√†o g≈çngyu√°n le.`
  },
  {
    cn_raw: `‰ªäÂ§©ÈÄõÂÖ¨Âõ≠ÁöÑ‰∫∫ÁúüÂ§ö,‰π∞Á•®Ë¶ÅÊéíÈòü,Êàë‰ª¨Êéí‰∫Ü‰∫îÂàÜÈíüÊâç‰π∞Âà∞Á•®„ÄÇ`,
    cn_split: `‰ªäÂ§©  -  ÈÄõ  -  ÂÖ¨Âõ≠  -  ÁöÑ  -  ‰∫∫  -  Áúü  -  Â§ö  -  ‰π∞  -  Á•®  -  Ë¶Å  -  ÊéíÈòü  -  Êàë‰ª¨  -  Êéí  -  ‰∫Ü  -  ‰∫î  -  ÂàÜÈíü  -  Êâç  -  ‰π∞  -  Âà∞  -  Á•®`,
    cn_pos: `n  -  v  -  n  -  part  -  n  -  adv  -  adj  -  v  -  n  -  v  -  v  -  pron  -  v  -  part  -  num  -  mw  -  adv  -  v  -  v  -  n`,
    en_raw: `Many people were visiting the park today, we had to queue for tickets, we queued for five minutes before getting the tickets.`,
    en_split: `Many  -  people  -  were  -  visiting  -  the  -  park  -  today  -  we  -  had  -  to  -  queue  -  for  -  tickets  -  we  -  queued  -  for  -  five  -  minutes  -  before  -  getting  -  the  -  tickets`,
    en_pos: `adj  -  n  -  v  -  v  -  art  -  n  -  n  -  pron  -  v  -  part  -  v  -  prep  -  n  -  pron  -  v  -  prep  -  num  -  n  -  prep  -  v  -  art  -  n`,
    vi: `H√¥m nay ng∆∞·ªùi ƒëi d·∫°o c√¥ng vi√™n th·∫≠t ƒë√¥ng, mua v√© ph·∫£i x·∫øp h√†ng, ch√∫ng t√¥i x·∫øp h√†ng nƒÉm ph√∫t m·ªõi mua ƒë∆∞·ª£c v√©.`,
    pinyin: `Jƒ´ntiƒÅn gu√†ng g≈çngyu√°n de r√©n zhƒìn du≈ç, m«éipi√†o y√†o p√°idu√¨, w«ímen p√°ile w«î fƒìnzh≈çng c√°i m«éid√†o pi√†o.`
  },
  {
    cn_raw: `‰π∞‰∫ÜÁ•®Êàë‰ª¨Â∞±ËøõÂéª‰∫Ü„ÄÇ`,
    cn_split: `‰π∞  -  ‰∫Ü  -  Á•®  -  Êàë‰ª¨  -  Â∞±  -  ËøõÂéª  -  ‰∫Ü`,
    cn_pos: `v  -  part  -  n  -  pron  -  adv  -  v  -  part`,
    en_raw: `After buying the tickets, we went in.`,
    en_split: `After  -  buying  -  the  -  tickets  -  we  -  went  -  in`,
    en_pos: `prep  -  v  -  art  -  n  -  pron  -  v  -  adv`,
    vi: `Mua v√© xong ch√∫ng t√¥i ƒëi v√†o lu√¥n.`,
    pinyin: `M«éile pi√†o w«ímen ji√π j√¨nq√πle.`
  },
  {
    cn_raw: `ÊàëÂíåÁΩóÂÖ∞ÂÖàÁà¨Â±±,Áà¨‰∫Ü‰∫åÂçÅÂ§öÂàÜÈíüÂ∞±Áà¨Âà∞‰∫ÜÂ±±‰∏ä„ÄÇ`,
    cn_split: `Êàë  -  Âíå  -  ÁΩóÂÖ∞  -  ÂÖà  -  Áà¨Â±±  -  Áà¨  -  ‰∫Ü  -  ‰∫åÂçÅ  -  Â§ö  -  ÂàÜÈíü  -  Â∞±  -  Áà¨  -  Âà∞  -  ‰∫Ü  -  Â±±‰∏ä`,
    cn_pos: `pron  -  conj  -  n  -  adv  -  v  -  v  -  part  -  num  -  adj  -  mw  -  adv  -  v  -  v  -  part  -  n`,
    en_raw: `Roland and I first climbed the mountain, it took more than twenty minutes to reach the top.`,
    en_split: `Roland  -  and  -  I  -  first  -  climbed  -  the  -  mountain  -  it  -  took  -  more  -  than  -  twenty  -  minutes  -  to  -  reach  -  the  -  top`,
    en_pos: `n  -  conj  -  pron  -  adv  -  v  -  art  -  n  -  pron  -  v  -  adj  -  prep  -  num  -  n  -  part  -  v  -  art  -  n`,
    vi: `T√¥i v√† Roland leo n√∫i tr∆∞·ªõc, leo h∆°n hai m∆∞∆°i ph√∫t l√† ƒë√£ leo l√™n t·ªõi ƒë·ªânh n√∫i r·ªìi.`,
    pinyin: `W«í h√© Lu√≥l√°n xiƒÅn p√°shƒÅn, p√°le √®rsh√≠ du≈ç fƒìnzh≈çng ji√π p√°d√†ole shƒÅnsh√†ng.`
  },
  {
    cn_raw: `Âõ†‰∏∫Áà¨ÂæóÂ§™Âø´‰∫Ü,ÊàëÂá∫‰∫Ü‰∏ÄË∫´Ê±ó„ÄÇ`,
    cn_split: `Âõ†‰∏∫  -  Áà¨  -  Âæó  -  Â§™  -  Âø´  -  ‰∫Ü  -  Êàë  -  Âá∫  -  ‰∫Ü  -  ‰∏ÄË∫´  -  Ê±ó`,
    cn_pos: `conj  -  v  -  part  -  adv  -  adj  -  part  -  pron  -  v  -  part  -  num  -  n`,
    en_raw: `Because I climbed too fast, I broke into a sweat.`,
    en_split: `Because  -  I  -  climbed  -  too  -  fast  -  I  -  broke  -  into  -  a  -  sweat`,
    en_pos: `conj  -  pron  -  v  -  adv  -  adv  -  pron  -  v  -  prep  -  art  -  n`,
    vi: `V√¨ leo qu√° nhanh, t√¥i ra ƒë·∫ßy m·ªì h√¥i.`,
    pinyin: `Yƒ´nw√®i p√° de t√†i ku√†i le, w«í ch≈´le yƒ´shƒìn h√†n.`
  },
  {
    cn_raw: `‰ªéÂ±±‰∏äÂæÄ‰∏ãÁúã,ÈùûÂ∏∏ÊºÇ‰∫Æ„ÄÇ`,
    cn_split: `‰ªé  -  Â±±‰∏ä  -  ÂæÄ  -  ‰∏ã  -  Áúã  -  ÈùûÂ∏∏  -  ÊºÇ‰∫Æ`,
    cn_pos: `prep  -  n  -  prep  -  n  -  v  -  adv  -  adj`,
    en_raw: `Looking down from the mountain, it is extremely beautiful.`,
    en_split: `Looking  -  down  -  from  -  the  -  mountain  -  it  -  is  -  extremely  -  beautiful`,
    en_pos: `v  -  adv  -  prep  -  art  -  n  -  pron  -  v  -  adv  -  adj`,
    vi: `T·ª´ tr√™n n√∫i nh√¨n xu·ªëng d∆∞·ªõi, v√¥ c√πng ƒë·∫πp.`,
    pinyin: `C√≥ng shƒÅnsh√†ng w«éng xi√† k√†n, fƒìich√°ng pi√†oliang.`
  },
  {
    cn_raw: `Â±±‰∏äÊúâÂæàÂ§öÊ†ë,ËøòÊúâÂæàÂ§öËä±„ÄÇ`,
    cn_split: `Â±±‰∏ä  -  Êúâ  -  ÂæàÂ§ö  -  Ê†ë  -  Ëøò  -  Êúâ  -  ÂæàÂ§ö  -  Ëä±`,
    cn_pos: `n  -  v  -  adj  -  n  -  adv  -  v  -  adj  -  n`,
    en_raw: `There are many trees and many flowers on the mountain.`,
    en_split: `There  -  are  -  many  -  trees  -  and  -  many  -  flowers  -  on  -  the  -  mountain`,
    en_pos: `adv  -  v  -  adj  -  n  -  conj  -  adj  -  n  -  prep  -  art  -  n`,
    vi: `Tr√™n n√∫i c√≥ r·∫•t nhi·ªÅu c√¢y, c√≤n c√≥ r·∫•t nhi·ªÅu hoa.`,
    pinyin: `ShƒÅnsh√†ng y«íu hƒõndu≈ç sh√π, h√°i y«íu hƒõndu≈ç huƒÅ.`
  },
  {
    cn_raw: `ÂÖ¨Âõ≠ÈáåÊúâ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÊπñ„ÄÇ`,
    cn_split: `ÂÖ¨Âõ≠  -  Èáå  -  Êúâ  -  ‰∏Ä‰∏™  -  Âæà  -  Â§ß  -  ÁöÑ  -  Êπñ`,
    cn_pos: `n  -  n  -  v  -  num  -  adv  -  adj  -  part  -  n`,
    en_raw: `There is a very large lake in the park.`,
    en_split: `There  -  is  -  a  -  very  -  large  -  lake  -  in  -  the  -  park`,
    en_pos: `adv  -  v  -  art  -  adv  -  adj  -  n  -  prep  -  art  -  n`,
    vi: `Trong c√¥ng vi√™n c√≥ m·ªôt c√°i h·ªì r·∫•t l·ªõn.`,
    pinyin: `G≈çngyu√°n l«ê y«íu yƒ´g√® hƒõn d√† de h√∫.`
  },
  {
    cn_raw: `Êπñ‰∏äÊúâ‰∏ÄÂ∫ßÁôΩËâ≤ÁöÑÊ°•„ÄÇ`,
    cn_split: `Êπñ  -  ‰∏ä  -  Êúâ  -  ‰∏ÄÂ∫ß  -  ÁôΩËâ≤  -  ÁöÑ  -  Ê°•`,
    cn_pos: `n  -  n  -  v  -  num  -  n  -  part  -  n`,
    en_raw: `There is a white bridge on the lake.`,
    en_split: `There  -  is  -  a  -  white  -  bridge  -  on  -  the  -  lake`,
    en_pos: `adv  -  v  -  art  -  adj  -  n  -  prep  -  art  -  n`,
    vi: `Tr√™n h·ªì c√≥ m·ªôt c√¢y c·∫ßu m√†u tr·∫Øng.`,
    pinyin: `H√∫ sh√†ng y«íu yƒ´zu√≤ b√°is√® de qi√°o.`
  },
  {
    cn_raw: `ÂæàÂ§ö‰∫∫Âú®ÊπñËæπÊï£Ê≠•,ËøòÊúâ‰∏çÂ∞ë‰∫∫Âú®Êπñ‰∏äÂàíËàπ„ÄÇ`,
    cn_split: `ÂæàÂ§ö  -  ‰∫∫  -  Âú®  -  ÊπñËæπ  -  Êï£Ê≠•  -  Ëøò  -  Êúâ  -  ‰∏çÂ∞ë  -  ‰∫∫  -  Âú®  -  Êπñ‰∏ä  -  ÂàíËàπ`,
    cn_pos: `adj  -  n  -  prep  -  n  -  v  -  adv  -  v  -  adj  -  n  -  prep  -  n  -  v`,
    en_raw: `Many people were walking by the lake, and quite a few people were rowing on the lake.`,
    en_split: `Many  -  people  -  were  -  walking  -  by  -  the  -  lake  -  and  -  quite  -  a  -  few  -  people  -  were  -  rowing  -  on  -  the  -  lake`,
    en_pos: `adj  -  n  -  v  -  v  -  prep  -  art  -  n  -  conj  -  adj  -  n  -  v  -  v  -  prep  -  art  -  n`,
    vi: `R·∫•t nhi·ªÅu ng∆∞·ªùi ƒëang ƒëi d·∫°o b√™n h·ªì, c√≤n c√≥ kh√¥ng √≠t ng∆∞·ªùi ƒëang ch√®o thuy·ªÅn tr√™n h·ªì.`,
    pinyin: `Hƒõndu≈ç r√©n z√†i h√∫biƒÅn s√†nb√π, h√°i y«íu b√πsh«éo r√©n z√†i h√∫sh√†ng hu√°chu√°n.`
  },
  {
    cn_raw: `ÁΩóÂÖ∞ËØ¥,Ëøô‰∏™ÂÖ¨Âõ≠ÁúüÂ§ß„ÄÅÁúüÊºÇ‰∫Æ„ÄÇ`,
    cn_split: `ÁΩóÂÖ∞  -  ËØ¥  -  Ëøô‰∏™  -  ÂÖ¨Âõ≠  -  Áúü  -  Â§ß  -  Áúü  -  ÊºÇ‰∫Æ`,
    cn_pos: `n  -  v  -  pron  -  n  -  adv  -  adj  -  adv  -  adj`,
    en_raw: `Roland said, this park is really big and really beautiful.`,
    en_split: `Roland  -  said  -  this  -  park  -  is  -  really  -  big  -  and  -  really  -  beautiful`,
    en_pos: `n  -  v  -  det  -  n  -  v  -  adv  -  adj  -  conj  -  adv  -  adj`,
    vi: `Roland n√≥i, c√¥ng vi√™n n√†y th·∫≠t l·ªõn, th·∫≠t ƒë·∫πp.`,
    pinyin: `Lu√≥l√°n shu≈ç, zh√®ge g≈çngyu√°n zhƒìn d√†, zhƒìn pi√†oliang.`
  },
  {
    cn_raw: `ÊàëÂíåÁΩóÂÖ∞Âú®Â±±‰∏äÁÖß‰∫ÜÂæàÂ§öÁõ∏„ÄÇ`,
    cn_split: `Êàë  -  Âíå  -  ÁΩóÂÖ∞  -  Âú®  -  Â±±‰∏ä  -  ÁÖß  -  ‰∫Ü  -  ÂæàÂ§ö  -  Áõ∏`,
    cn_pos: `pron  -  conj  -  n  -  prep  -  n  -  v  -  part  -  adj  -  n`,
    en_raw: `Roland and I took many photos on the mountain.`,
    en_split: `Roland  -  and  -  I  -  took  -  many  -  photos  -  on  -  the  -  mountain`,
    en_pos: `n  -  conj  -  pron  -  v  -  adj  -  n  -  prep  -  art  -  n`,
    vi: `T√¥i v√† Roland ƒë√£ ch·ª•p r·∫•t nhi·ªÅu ·∫£nh tr√™n n√∫i.`,
    pinyin: `W«í h√© Lu√≥l√°n z√†i shƒÅnsh√†ng zh√†ole hƒõndu≈ç xi√†ng.`
  },
  {
    cn_raw: `ÁÖßÂÆåÁõ∏Êàë‰ª¨Â∞±‰∏ãÂ±±‰∫Ü„ÄÇ`,
    cn_split: `ÁÖß  -  ÂÆå  -  Áõ∏  -  Êàë‰ª¨  -  Â∞±  -  ‰∏ãÂ±±  -  ‰∫Ü`,
    cn_pos: `v  -  v  -  n  -  pron  -  adv  -  v  -  part`,
    en_raw: `After finishing taking photos, we went down the mountain.`,
    en_split: `After  -  finishing  -  taking  -  photos  -  we  -  went  -  down  -  the  -  mountain`,
    en_pos: `prep  -  v  -  v  -  n  -  pron  -  v  -  prep  -  art  -  n`,
    vi: `Ch·ª•p ·∫£nh xong ch√∫ng t√¥i xu·ªëng n√∫i lu√¥n.`,
    pinyin: `Zh√†ow√°n xi√†ng w«ímen ji√π xi√†shƒÅn le.`
  },
  {
    cn_raw: `Êàë‰ª¨Âú®ÂÖ¨Âõ≠ÈáåÁé©‰∫Ü‰∏Ä‰∏™‰∏äÂçà,Áúã‰∫ÜÂæàÂ§öÂú∞Êñπ„ÄÇ`,
    cn_split: `Êàë‰ª¨  -  Âú®  -  ÂÖ¨Âõ≠  -  Èáå  -  Áé©  -  ‰∫Ü  -  ‰∏Ä‰∏™  -  ‰∏äÂçà  -  Áúã  -  ‰∫Ü  -  ÂæàÂ§ö  -  Âú∞Êñπ`,
    cn_pos: `pron  -  prep  -  n  -  n  -  v  -  part  -  num  -  n  -  v  -  part  -  adj  -  n`,
    en_raw: `We played in the park for a whole morning and saw many places.`,
    en_split: `We  -  played  -  in  -  the  -  park  -  for  -  a  -  whole  -  morning  -  and  -  saw  -  many  -  places`,
    en_pos: `pron  -  v  -  prep  -  art  -  n  -  prep  -  art  -  adj  -  n  -  conj  -  v  -  adj  -  n`,
    vi: `Ch√∫ng t√¥i ƒë√£ ch∆°i trong c√¥ng vi√™n su·ªët m·ªôt bu·ªïi s√°ng, xem r·∫•t nhi·ªÅu n∆°i.`,
    pinyin: `W«ímen z√†i g≈çngyu√°n l«ê w√°nle yƒ´g√® sh√†ngw«î, k√†nle hƒõndu≈ç d√¨fƒÅng.`
  },
  {
    cn_raw: `ÊàëÂØπÁΩóÂÖ∞ËØ¥,Â≠¶Ê†°Á¶ªËøô‰∏™ÂÖ¨Âõ≠‰∏çÂ§™Ëøú„ÄÇ`,
    cn_split: `Êàë  -  ÂØπ  -  ÁΩóÂÖ∞  -  ËØ¥  -  Â≠¶Ê†°  -  Á¶ª  -  Ëøô‰∏™  -  ÂÖ¨Âõ≠  -  ‰∏ç  -  Â§™  -  Ëøú`,
    cn_pos: `pron  -  prep  -  n  -  v  -  n  -  prep  -  pron  -  n  -  adv  -  adv  -  adj`,
    en_raw: `I said to Roland, the school is not too far from this park.`,
    en_split: `I  -  said  -  to  -  Roland  -  the  -  school  -  is  -  not  -  too  -  far  -  from  -  this  -  park`,
    en_pos: `pron  -  v  -  prep  -  n  -  art  -  n  -  v  -  adv  -  adv  -  adj  -  prep  -  det  -  n`,
    vi: `T√¥i n√≥i v·ªõi Roland, tr∆∞·ªùng h·ªçc c√°ch c√¥ng vi√™n n√†y kh√¥ng xa l·∫Øm.`,
    pinyin: `W«í du√¨ Lu√≥l√°n shu≈ç, xu√©xi√†o l√≠ zh√®ge g≈çngyu√°n b√π t√†i yu«én.`
  },
  {
    cn_raw: `ÂèØ‰ª•ÁªèÂ∏∏È™ëËΩ¶Âà∞ËøôÂÑøÊù•Áé©ÂÑø„ÄÇ`,
    cn_split: `ÂèØ‰ª•  -  ÁªèÂ∏∏  -  È™ëËΩ¶  -  Âà∞  -  ËøôÂÑø  -  Êù•  -  Áé©ÂÑø`,
    cn_pos: `v  -  adv  -  v  -  prep  -  pron  -  v  -  v`,
    en_raw: `We can often ride bikes here to play.`,
    en_split: `We  -  can  -  often  -  ride  -  bikes  -  here  -  to  -  play`,
    en_pos: `pron  -  v  -  adv  -  v  -  n  -  adv  -  part  -  v`,
    vi: `C√≥ th·ªÉ th∆∞·ªùng xuy√™n ƒë·∫°p xe ƒë·∫øn ƒë√¢y ch∆°i.`,
    pinyin: `Kƒõy«ê jƒ´ngch√°ng q√≠chƒì d√†o zh√®'er l√°i w√°nr.`
  },
  {
    cn_raw: `Áà¨Áà¨Â±±,ÂàíÂàíËàπÊàñËÄÖË∑üÊúãÂèã‰∏ÄËµ∑Êù•Êï£Êï£Ê≠•,ËÅäËÅäÂ§©„ÄÇ`,
    cn_split: `Áà¨Áà¨Â±±  -  ÂàíÂàíËàπ  -  ÊàñËÄÖ  -  Ë∑ü  -  ÊúãÂèã  -  ‰∏ÄËµ∑  -  Êù•  -  Êï£Êï£Ê≠•  -  ËÅäËÅäÂ§©`,
    cn_pos: `v  -  v  -  conj  -  prep  -  n  -  adv  -  v  -  v  -  v`,
    en_raw: `Climb the mountain, row the boat, or come with friends for a stroll and a chat.`,
    en_split: `Climb  -  the  -  mountain  -  row  -  the  -  boat  -  or  -  come  -  with  -  friends  -  for  -  a  -  stroll  -  and  -  a  -  chat`,
    en_pos: `v  -  art  -  n  -  v  -  art  -  n  -  conj  -  v  -  prep  -  n  -  prep  -  art  -  n  -  conj  -  art  -  v`,
    vi: `Leo n√∫i, ch√®o thuy·ªÅn ho·∫∑c c√πng b·∫°n b√® ƒë·∫øn ƒë√¢y ƒëi d·∫°o, t√°n g·∫´u.`,
    pinyin: `P√°p√°shƒÅn, hu√°hu√°chu√°n hu√≤zhƒõ gƒìn p√©ngy«íu yƒ´q«ê l√°i s√†ns√†nb√π, li√°oli√°otiƒÅn.`
  },
  {
    cn_raw: `ÁΩóÂÖ∞ËØ¥,‰ª•ÂêéÊàë‰ª¨ÂèØ‰ª•ÂÜçÊù•„ÄÇ`,
    cn_split: `ÁΩóÂÖ∞  -  ËØ¥  -  ‰ª•Âêé  -  Êàë‰ª¨  -  ÂèØ‰ª•  -  ÂÜç  -  Êù•`,
    cn_pos: `n  -  v  -  n  -  pron  -  v  -  adv  -  v`,
    en_raw: `Roland said, we can come again in the future.`,
    en_split: `Roland  -  said  -  we  -  can  -  come  -  again  -  in  -  the  -  future`,
    en_pos: `n  -  v  -  pron  -  v  -  v  -  adv  -  prep  -  art  -  n`,
    vi: `Roland n√≥i, sau n√†y ch√∫ng ta c√≥ th·ªÉ quay l·∫°i.`,
    pinyin: `Lu√≥l√°n shu≈ç, y«êh√≤u w«ímen kƒõy«ê z√†il√°i.`
  }
];
// C·∫≠p nh·∫≠t h√†m render ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu an to√†n h∆°n
function renderBook() {
    const container = document.getElementById('bookContent');
    sentences.forEach((s, i) => {
        const item = document.createElement('div');
        item.className = 'sentence-item';
        item.innerHTML = `
            <div class="text-content">
                <div class="row-cn">
                    <span id="cn-txt-${i}">${s.cn_raw}</span>
                </div>
                <div id="cn-pos-${i}" class="pos-tag hidden">${s.cn_pos}</div>
		<p>
                <div id="pinyin-${i}" class="pinyin-row hidden">${s.pinyin || ''}</div>
                <div class="row-en">
                    <span id="en-txt-${i}">${s.en_raw}</span>
                </div>
                <div id="en-pos-${i}" class="pos-tag hidden">${s.en_pos}</div>
                <p>
                <div class="row-vi">${s.vi}</div>
            </div>
            <div class="control-sidebar">
                <button class="btn-icon" onclick="playSpeech(${i}, 'cn')">üó£Ô∏è</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'cn')">üß©</button>
                <button class="btn-icon" onclick="playSpeech(${i}, 'en')">üîä</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'en')">üîç</button>
            </div>
        `;
        container.appendChild(item);
    });
}
// H√†m ph√°t √¢m m·ªõi: L·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ m·∫£ng thay v√¨ truy·ªÅn chu·ªói qua HTML
// H√†m ph√°t √¢m: T·ª± ƒë·ªông duy tr√¨ ng√¥n ng·ªØ ƒëang ch·ªçn
function playSpeech(index, langType) {
    // 1. D·ª´ng m·ªçi √¢m thanh ƒëang ph√°t ƒë·ªÉ tr√°nh ch·ªìng ch√©o
    window.speechSynthesis.cancel(); 

    let textToRead = "";
    let langCode = "";

    // 2. X√°c ƒë·ªãnh n·ªôi dung v√† m√£ ng√¥n ng·ªØ d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    if (langType === 'cn') {
        textToRead = sentences[index].cn_raw;
        langCode = 'zh-CN';
    } else {
        textToRead = sentences[index].en_raw;
        langCode = 'en-US';
    }

    const msg = new SpeechSynthesisUtterance();
    msg.text = textToRead;
    msg.lang = langCode;
    msg.rate = document.getElementById('rate').value;
    
    // 3. Hi·ªáu ·ª©ng Highlight: T√¥ m√†u c√¢u ƒëang ƒë·ªçc ƒë·ªÉ d·ªÖ theo d√µi
    const allItems = document.getElementsByClassName('sentence-item');
    // X√≥a m√†u c·ªßa t·∫•t c·∫£ c√°c c√¢u kh√°c
    Array.from(allItems).forEach(item => item.style.backgroundColor = "transparent");
    // T√¥ m√†u v√†ng nh·∫°t cho c√¢u hi·ªán t·∫°i
    allItems[index].style.backgroundColor = "rgba(230, 126, 34, 0.1)";

    // 4. X·ª≠ l√Ω khi k·∫øt th√∫c c√¢u
    msg.onend = () => {
        const isAuto = document.getElementById('autoNext').checked;
        if (isAuto && index < sentences.length - 1) {
            setTimeout(() => {
                // QUAN TR·ªåNG: Truy·ªÅn ƒë√∫ng langType hi·ªán t·∫°i v√†o l·∫ßn g·ªçi ti·∫øp theo
                playSpeech(index + 1, langType); 
                
                // T·ª± ƒë·ªông cu·ªôn m√†n h√¨nh ƒë·∫øn c√¢u ti·∫øp theo
                allItems[index + 1].scrollIntoView({
                    behavior: "smooth", 
                    block: "center"
                });
            }, 500); // Ngh·ªâ 0.5 gi√¢y gi·ªØa c√°c c√¢u ƒë·ªÉ ng∆∞·ªùi d√πng k·ªãp ng·∫•m
        }
    };

    window.speechSynthesis.speak(msg);
}
function toggleMode(index, lang) {
    const txtSpan = document.getElementById(`${lang}-txt-${index}`);
    const posSpan = document.getElementById(`${lang}-pos-${index}`);
    const isOriginal = txtSpan.innerText === sentences[index][`${lang}_raw`];

    txtSpan.innerText = isOriginal ? sentences[index][`${lang}_split`] : sentences[index][`${lang}_raw`];
    posSpan.classList.toggle('hidden');
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

function toggleAllPinyin() {
    // 1. L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class l√† pinyin-row
    const pinyinElements = document.getElementsByClassName('pinyin-row');
    
    // 2. Ki·ªÉm tra n·∫øu kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o (b√°o l·ªói ra Console ƒë·ªÉ ki·ªÉm tra)
    if (pinyinElements.length === 0) {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o c√≥ class 'pinyin-row'");
        return;
    }

    // 3. Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ v√† b·∫≠t/t·∫Øt class 'hidden'
    for (let i = 0; i < pinyinElements.length; i++) {
        pinyinElements[i].classList.toggle('hidden');
    }
}

function speak(text, lang, index) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    msg.rate = document.getElementById('rate').value;

    msg.onend = () => {
        if (document.getElementById('autoNext').checked && index < sentences.length - 1) {
            setTimeout(() => {
                speak(sentences[index + 1].cn_raw, 'zh-CN', index + 1);
                document.getElementsByClassName('sentence-item')[index+1].scrollIntoView({behavior: "smooth", block: "center"});
            }, 1200);
        }
    };
    window.speechSynthesis.speak(msg);
}

renderBook();
</script>
</body>
</html>