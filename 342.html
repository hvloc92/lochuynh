<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet">
    <title>S√°ch ƒêa Ng√¥n Ng·ªØ</title>
    <style>
        :root {
            --bg-body: #dcdcdc;
            --bg-book: #f4f1ea;
            --text-main: #1a1a1a;
            --text-sub: #555;
            --accent: #e67e22;
            --border: #d1ccc0;
        }

        /* Ch·∫ø ƒë·ªô Dark Mode */
        .dark-mode {
            --bg-body: #1a1a1b;
            --bg-book: #2c2c2e;
            --text-main: #e1e1e1;
            --text-sub: #b0b0b0;
            --accent: #f39c12;
            --border: #444;
        }

        body { 
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .book-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-book);
            min-height: 100vh;
            padding-top: 20px;
        }

        .sentence-item {
            display: flex;
            padding: 20px 5%; /* L·ªÅ tr√°i 5% theo y√™u c·∫ßu */
            border-bottom: 1px solid var(--border);
            word-wrap: break-word; /* T·ª± ƒë·ªông xu·ªëng d√≤ng */
        }

        .text-content {
            flex: 1;
            padding-right: 15px;
        }

        .row-cn { font-family: "Noto Serif SC","Segoe UI", Tahoma, Geneva, Verdana, sans-serif; font-size: 1.8rem; font-weight: normal; margin-bottom: 20px; line-height: 1.4; }
        .row-en { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-main); opacity: 0.9; }
        .row-vi { font-size: 1rem; color: var(--text-sub); font-style: italic; }
        
        .pos-tag { font-size: 0.85rem; color: var(--accent); display: block; margin-bottom: 20px; margin-top: 0px; font-weight: normal; }

        /* Ph√≠m ch·ª©c nƒÉng d·∫°ng c·ªôt icon */
        .control-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: 0.2s;
        }
        .btn-icon:hover { background: #eee; transform: scale(1.1); }

        /* Menu n·ªïi c·ªë ƒë·ªãnh ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }

        .settings-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            color: #333;
            font-size: 14px;
        }

        .show-settings .settings-box { display: block; }

        .btn-main-float {
            width: 50px;
            height: 50px;
            background: #34495e;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

	/* Th√™m v√†o trong th·∫ª <style> */
	.pinyin-row {
    		font-size: 16px;
		font-weight: normal;
   		color: #27ae60; /* M√†u xanh l√° d·ªãu m·∫Øt */
    		display: block;
    		margin-top: 0px;
		margin-bottom: 20px;
	}


        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="book-container" id="bookContent">
    </div>

<div class="floating-menu" id="floatMenu">
    <div class="settings-box">
        <strong>‚öôÔ∏è C√†i ƒë·∫∑t</strong><hr>
        T·ªëc ƒë·ªô: <input type="range" id="rate" min="0.5" max="1.3" step="0.1" value="0.9" style="width: 100px;"><br>
        <label><input type="checkbox" id="autoNext"> T·ª± ƒë·ªông chuy·ªÉn</label><br>
	<button onclick="toggleAllPinyin()" style="width: 100%; margin-top: 10px;">üî§ ·∫®n/Hi·ªán Pinyin</button>
        <button onclick="toggleDarkMode()" style="width: 100%; margin-top: 10px;">üåô Dark Mode</button>
    </div>
    <button class="btn-main-float" onclick="document.getElementById('floatMenu').classList.toggle('show-settings')">üõ†Ô∏è</button>
</div>

<script>
const sentences = [
  {
    cn_raw: `(‰∫å) Âø´‰∏äÊù•Âêß, Ë¶ÅÂºÄËΩ¶‰∫Ü`,
    cn_split: `(‰∫å) - Âø´ - ‰∏äÊù• - Âêß - , - Ë¶Å - ÂºÄËΩ¶ - ‰∫Ü`,
    cn_pos: `S·ªë t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `(II) Come up quickly, the bus is about to start.`,
    en_split: `(II) - Come up - quickly - , - the bus - is about to - start`,
    en_pos: `Numeral - Phrasal verb - Adverb - Punctuation - Subject (Noun) - Auxiliary - Verb`,
    vi: `(II) Mau l√™n ƒë√¢y ƒëi, s·∫Øp ch·∫°y xe r·ªìi.`,
    pinyin: `(√àr) Ku√†i sh√†ngl√°i ba, y√†o kƒÅichƒì le`
  },
  {
    cn_raw: `(ÊûóËÄÅÂ∏àÂíåÂêåÂ≠¶‰ª¨‰∏ÄËµ∑ÂùêËΩ¶ÂéªÂ±ïËßàÈ¶ÜÂèÇËßÇ„ÄÇ`,
    cn_split: `( - ÊûóËÄÅÂ∏à - Âíå - ÂêåÂ≠¶‰ª¨ - ‰∏ÄËµ∑ - ÂùêËΩ¶ - Âéª - Â±ïËßàÈ¶Ü - ÂèÇËßÇ - „ÄÇ`,
    cn_pos: `K√Ω hi·ªáu - Danh t·ª´ ri√™ng - Li√™n t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ (V-O) - ƒê·ªông t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - D·∫•u c√¢u`,
    en_raw: `(Teacher Lin and the students take a bus to visit the exhibition hall.`,
    en_split: `( - Teacher Lin - and - the students - take - a bus - to visit - the exhibition hall`,
    en_pos: `Symbol - Subject (Noun) - Conjunction - Noun - Verb - Object - Infinitive - Object`,
    vi: `(Th·∫ßy L√¢m v√† c√°c b·∫°n h·ªçc sinh c√πng ng·ªìi xe ƒëi ƒë·∫øn nh√† tri·ªÉn l√£m tham quan.`,
    pinyin: `(L√≠n l«éoshƒ´ h√© t√≥ngxu√©men y√¨q«ê zu√≤chƒì q√π zh«énl«éngu«én cƒÅnguƒÅn.`
  },
  {
    cn_raw: `ËΩ¶Â∞±Ë¶ÅÂºÄ‰∫Ü, ÊûóËÄÅÂ∏àÂú®ËΩ¶‰∏äÂè´ÂêåÂ≠¶‰ª¨Âø´‰∏äËΩ¶‚Ä¶`,
    cn_split: `ËΩ¶ - Â∞±Ë¶Å - ÂºÄ - ‰∫Ü - , - ÊûóËÄÅÂ∏à - Âú® - ËΩ¶‰∏ä - Âè´ - ÂêåÂ≠¶‰ª¨ - Âø´ - ‰∏äËΩ¶ - ‚Ä¶`,
    cn_pos: `Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - Danh t·ª´ ri√™ng - Gi·ªõi t·ª´ - Danh t·ª´ ch·ªâ n∆°i ch·ªën - ƒê·ªông t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - D·∫•u c√¢u`,
    en_raw: `The bus is about to leave, Teacher Lin is calling students to get on the bus...`,
    en_split: `The bus - is about to - leave - , - Teacher Lin - is calling - students - to get on - the bus`,
    en_pos: `Subject - Auxiliary - Verb - Punctuation - Subject - Present Continuous Verb - Object - Infinitive - Object`,
    vi: `Xe s·∫Øp ch·∫°y r·ªìi, th·∫ßy L√¢m ·ªü tr√™n xe g·ªçi c√°c b·∫°n h·ªçc sinh mau l√™n xe...`,
    pinyin: `Chƒì ji√πy√†o kƒÅi le, L√≠n l«éoshƒ´ z√†i chƒìsh√†ng ji√†o t√≥ngxu√©men ku√†i sh√†ngchƒì‚Ä¶`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºö‰∏ãËæπÁöÑÂêåÂ≠¶Âø´‰∏äÊù•Âêß, Ë¶ÅÂºÄËΩ¶‰∫Ü„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - ‰∏ãËæπ - ÁöÑ - ÂêåÂ≠¶ - Âø´ - ‰∏äÊù• - Âêß - , - Ë¶Å - ÂºÄËΩ¶ - ‰∫Ü - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - Danh t·ª´ ch·ªâ v·ªã tr√≠ - Tr·ª£ t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: Students below, come up quickly, the bus is about to start.`,
    en_split: `Teacher Lin - : - Students - below - , - come up - quickly - , - the bus - is about to - start`,
    en_pos: `Noun - Punctuation - Subject - Adverb - Punctuation - Verb - Adverb - Punctuation - Subject - Auxiliary - Verb`,
    vi: `Th·∫ßy L√¢m: C√°c em ·ªü ph√≠a d∆∞·ªõi mau l√™n ƒë√¢y ƒëi, s·∫Øp ch·∫°y xe r·ªìi.`,
    pinyin: `L√≠n l«éoshƒ´: Xi√†biƒÅn de t√≥ngxu√© ku√†i sh√†ngl√°i ba, y√†o kƒÅichƒì le.`
  },
  {
    cn_raw: `È∫¶ÂÖãÔºöËÄÅÂ∏à, Êàë‰∏ç‰∏äÂéª‰∫Ü, ÊàëÂà∞ÂêéËæπÁöÑ‰∫îÂè∑ËΩ¶ÂéªÂèØ‰ª•Âêó?`,
    cn_split: `È∫¶ÂÖã - Ôºö - ËÄÅÂ∏à - , - Êàë - ‰∏ç - ‰∏äÂéª - ‰∫Ü - , - Êàë - Âà∞ - ÂêéËæπ - ÁöÑ - ‰∫îÂè∑ËΩ¶ - Âéª - ÂèØ‰ª• - Âêó - ?`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ ch·ªâ v·ªã tr√≠ - Tr·ª£ t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - Tr·ª£ t·ª´ nghi v·∫•n - D·∫•u c√¢u`,
    en_raw: `Mike: Teacher, I'm not going up, can I go to bus number five in the back?`,
    en_split: `Mike - : - Teacher - , - I - am not going - up - , - can - I - go - to - bus number five - in the back`,
    en_pos: `Noun - Punctuation - Noun - Punctuation - Subject - Negative Verb - Adverb - Punctuation - Modal - Subject - Verb - Preposition - Object - Adverb`,
    vi: `Mike: Th·∫ßy ∆°i, em kh√¥ng l√™n n·ªØa, em ƒë·∫øn xe s·ªë 5 ·ªü ph√≠a sau c√≥ ƒë∆∞·ª£c kh√¥ng ·∫°?`,
    pinyin: `M√†ik√®: L«éoshƒ´, w«í b√π sh√†ngq√π le, w«í d√†o h√≤ubiƒÅn de w«î h√†o chƒì q√π kƒõy«ê ma?`
  },
  {
    cn_raw: `ÊàëÊúãÂèãÂú®ÈÇ£ÂÑø„ÄÇ`,
    cn_split: `Êàë - ÊúãÂèã - Âú® - ÈÇ£ÂÑø - „ÄÇ`,
    cn_pos: `ƒê·∫°i t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ (t·ªìn t·∫°i) - ƒê·∫°i t·ª´ ch·ªâ n∆°i ch·ªën - D·∫•u c√¢u`,
    en_raw: `My friend is there.`,
    en_split: `My friend - is - there`,
    en_pos: `Subject - Verb - Adverb`,
    vi: `B·∫°n c·ªßa em ·ªü ƒë√≥.`,
    pinyin: `W«í p√©ngy«íu z√†i n√†r.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºö‰Ω†ËøáÂéªÂêß„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - ‰Ω† - ËøáÂéª - Âêß - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: You go there.`,
    en_split: `Teacher Lin - : - You - go - there`,
    en_pos: `Noun - Punctuation - Subject - Verb - Adverb`,
    vi: `Th·∫ßy L√¢m: Em qua ƒë√≥ ƒëi.`,
    pinyin: `L√≠n l«éoshƒ´: N«ê gu√≤q√π ba.`
  },
  {
    cn_raw: `Áéõ‰∏ΩÊÄé‰πàËøòÊ≤°‰∏äÊù•Âë¢?`,
    cn_split: `Áéõ‰∏Ω - ÊÄé‰πà - Ëøò - Ê≤° - ‰∏äÊù• - Âë¢ - ?`,
    cn_pos: `Danh t·ª´ ri√™ng - ƒê·∫°i t·ª´ nghi v·∫•n - Ph√≥ t·ª´ - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ nghi v·∫•n - D·∫•u c√¢u`,
    en_raw: `Why hasn't Mary come up yet?`,
    en_split: `Why - has - Mary - not - come up - yet`,
    en_pos: `Adverb - Auxiliary - Subject - Adverb - Verb - Adverb`,
    vi: `Mary sao v·∫´n ch∆∞a l√™n nh·ªâ?`,
    pinyin: `M«él√¨ zƒõnme h√°i m√©i sh√†ngl√°i ne?`
  },
  {
    cn_raw: `Â±±Êú¨ÔºöÂ•πÂøòÂ∏¶ÁÖßÁõ∏Êú∫‰∫Ü, ÂèàÂõûÂÆøËàçÂéªÊãø‰∫Ü, ‰∏Ä‰ºöÂÑøÂ∞±ÂõûÊù•„ÄÇ`,
    cn_split: `Â±±Êú¨ - Ôºö - Â•π - Âøò - Â∏¶ - ÁÖßÁõ∏Êú∫ - ‰∫Ü - , - Âèà - Âõû - ÂÆøËàç - Âéª - Êãø - ‰∫Ü - , - ‰∏Ä‰ºöÂÑø - Â∞± - ÂõûÊù• - „ÄÇ`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - Danh t·ª´ ch·ªâ th·ªùi gian - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - D·∫•u c√¢u`,
    en_raw: `Yamamoto: She forgot to bring her camera, went back to the dorm to get it, she'll be back in a while.`,
    en_split: `Yamamoto - : - She - forgot - to bring - her camera - , - went - back - to the dorm - to get - it - , - she - will be - back - in a while`,
    en_pos: `Noun - Punctuation - Subject - Verb - Infinitive - Object - Punctuation - Verb - Adverb - Prepositional phrase - Infinitive - Object - Punctuation - Subject - Auxiliary - Adverb - Time phrase`,
    vi: `Yamamoto: C·∫≠u ·∫•y qu√™n mang m√°y ·∫£nh r·ªìi, l·∫°i quay v·ªÅ k√Ω t√∫c x√° l·∫•y r·ªìi, m·ªôt l√°t n·ªØa s·∫Ω quay l·∫°i ngay.`,
    pinyin: `ShƒÅnbƒõn: TƒÅ w√†ng d√†i zh√†oxi√†ngjƒ´ le, y√≤u hu√≠ s√πsh√® q√π n√° le, y√≠hu√¨r ji√π hu√≠l√°i.`
  },
  {
    cn_raw: `Âïä, Â•πË∑ëÊù•‰∫Ü„ÄÇ`,
    cn_split: `Âïä - , - Â•π - Ë∑ë - Êù• - ‰∫Ü - „ÄÇ`,
    cn_pos: `Th√°n t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - D·∫•u c√¢u`,
    en_raw: `Ah, she is running here.`,
    en_split: `Ah - , - she - is running - here`,
    en_pos: `Interjection - Punctuation - Subject - Continuous Verb - Adverb`,
    vi: `A, c·∫≠u ·∫•y ƒëang ch·∫°y ƒë·∫øn r·ªìi.`,
    pinyin: `√Ä, tƒÅ p«éol√°i le.`
  },
  {
    cn_raw: `Áéõ‰∏Ω, Âø´ÁÇπÂÑø, Â∞±Ë¶ÅÂºÄËΩ¶‰∫Ü„ÄÇ`,
    cn_split: `Áéõ‰∏Ω - , - Âø´ÁÇπÂÑø - , - Â∞±Ë¶Å - ÂºÄËΩ¶ - ‰∫Ü - „ÄÇ`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u ph·∫©y - Ph√≥ t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - ƒê·ªông t·ª´ (V-O) - Tr·ª£ t·ª´ - D·∫•u c√¢u`,
    en_raw: `Mary, hurry up, the bus is about to start.`,
    en_split: `Mary - , - hurry up - , - the bus - is about to - start`,
    en_pos: `Noun - Punctuation - Verb phrase - Punctuation - Subject - Auxiliary - Verb`,
    vi: `Mary, nhanh l√™n ch√∫t, s·∫Øp ch·∫°y xe r·ªìi.`,
    pinyin: `M«él√¨, ku√†idi«énr, ji√πy√†o kƒÅichƒì le.`
  },
  {
    cn_raw: `(Áéõ‰∏Ω‰∏äÊù•‰∫Ü)`,
    cn_split: `( - Áéõ‰∏Ω - ‰∏äÊù• - ‰∫Ü - )`,
    cn_pos: `K√Ω hi·ªáu - Danh t·ª´ ri√™ng - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - K√Ω hi·ªáu`,
    en_raw: `(Mary came up)`,
    en_split: `( - Mary - came - up - )`,
    en_pos: `Symbol - Subject - Verb - Adverb - Symbol`,
    vi: `(Mary ƒë√£ l√™n r·ªìi)`,
    pinyin: `(M«él√¨ sh√†ngl√°i le)`
  },
  {
    cn_raw: `Áéõ‰∏ΩÔºöÂØπ‰∏çËµ∑, ÊàëÊù•Êôö‰∫Ü„ÄÇ`,
    cn_split: `Áéõ‰∏Ω - Ôºö - ÂØπ‰∏çËµ∑ - , - Êàë - Êù• - Êôö - ‰∫Ü - „ÄÇ`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - ƒê·ªông t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´ (b·ªï ng·ªØ) - Tr·ª£ t·ª´ - D·∫•u c√¢u`,
    en_raw: `Mary: Sorry, I am late.`,
    en_split: `Mary - : - Sorry - , - I - am - late`,
    en_pos: `Noun - Punctuation - Adjective - Punctuation - Subject - Verb - Adjective`,
    vi: `Mary: Xin l·ªói, em ƒë·∫øn mu·ªôn r·ªìi.`,
    pinyin: `M«él√¨: Du√¨buq«ê, w«í l√°i w«én le.`
  },
  {
    cn_raw: `Â±±Êú¨ÔºöÁéõ‰∏Ω, ËøôÂÑøËøòÊúâÂ∫ß‰Ωç, ‰Ω†ËøáÊù•Âêß„ÄÇ`,
    cn_split: `Â±±Êú¨ - Ôºö - Áéõ‰∏Ω - , - ËøôÂÑø - Ëøò - Êúâ - Â∫ß‰Ωç - , - ‰Ω† - ËøáÊù• - Âêß - „ÄÇ`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - Danh t·ª´ ri√™ng - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ ch·ªâ n∆°i ch·ªën - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u c√¢u`,
    en_raw: `Yamamoto: Mary, there are still seats here, come over here.`,
    en_split: `Yamamoto - : - Mary - , - there - are - still - seats - here - , - you - come - over here`,
    en_pos: `Noun - Punctuation - Noun - Punctuation - Adverb - Verb - Adverb - Noun - Adverb - Punctuation - Subject - Verb - Adverb`,
    vi: `Yamamoto: Mary, ·ªü ƒë√¢y v·∫´n c√≤n ch·ªó ng·ªìi, c·∫≠u qua ƒë√¢y ƒëi.`,
    pinyin: `ShƒÅnbƒõn: M«él√¨, zh√®r h√°i y«íu zu√≤w√®i, n«ê gu√≤l√°i ba.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºöËØ∑Â§ßÂÆ∂Ê≥®ÊÑè, ÊàëÂÖàËØ¥‰∏Ä‰ª∂‰∫ã„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - ËØ∑ - Â§ßÂÆ∂ - Ê≥®ÊÑè - , - Êàë - ÂÖà - ËØ¥ - ‰∏Ä - ‰ª∂ - ‰∫ã - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - S·ªë t·ª´ - L∆∞·ª£ng t·ª´ - Danh t·ª´ - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: Please pay attention everyone, I will say something first.`,
    en_split: `Teacher Lin - : - Please - pay attention - everyone - , - I - will say - something - first`,
    en_pos: `Noun - Punctuation - Verb - Verb - Object - Punctuation - Subject - Future Verb - Object - Adverb`,
    vi: `Th·∫ßy L√¢m: Xin m·ªçi ng∆∞·ªùi ch√∫ √Ω, th·∫ßy n√≥i m·ªôt vi·ªác n√†y tr∆∞·ªõc.`,
    pinyin: `L√≠n l«éoshƒ´: Q«êng d√†jiƒÅ zh√πy√¨, w«í xiƒÅn shu≈ç y√≠ ji√†n sh√¨.`
  },
  {
    cn_raw: `Êàë‰ª¨‰ªäÂ§©ÂéªÂèÇËßÇÂá∫ÂúüÊñáÁâ©Â±ïËßà„ÄÇ`,
    cn_split: `Êàë‰ª¨ - ‰ªäÂ§© - Âéª - ÂèÇËßÇ - Âá∫Âúü - ÊñáÁâ© - Â±ïËßà - „ÄÇ`,
    cn_pos: `ƒê·∫°i t·ª´ - Danh t·ª´ th·ªùi gian - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´/T√≠nh t·ª´ - Danh t·ª´ - Danh t·ª´ - D·∫•u c√¢u`,
    en_raw: `Today we are going to visit the exhibition of unearthed cultural relics.`,
    en_split: `Today - we - are going - to visit - the exhibition - of - unearthed cultural relics`,
    en_pos: `Time - Subject - Verb - Infinitive - Object - Preposition - Compound Noun`,
    vi: `Ch√∫ng ta h√¥m nay ƒëi tham quan tri·ªÉn l√£m di v·∫≠t vƒÉn h√≥a khai qu·∫≠t.`,
    pinyin: `W«ímen jƒ´ntiƒÅn q√π cƒÅnguƒÅn ch≈´t«î w√©nw√π zh«énl«én.`
  },
  {
    cn_raw: `Ëøô‰∏™Â±ïËßàÂ§ßÁ∫¶Ë¶ÅÂèÇËßÇ‰∏§‰∏™ÂçäÂ∞èÊó∂„ÄÇ`,
    cn_split: `Ëøô‰∏™ - Â±ïËßà - Â§ßÁ∫¶ - Ë¶Å - ÂèÇËßÇ - ‰∏§‰∏™Âçä - Â∞èÊó∂ - „ÄÇ`,
    cn_pos: `ƒê·∫°i t·ª´ ch·ªâ ƒë·ªãnh + L∆∞·ª£ng t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - S·ªë t·ª´ - Danh t·ª´ - D·∫•u c√¢u`,
    en_raw: `This exhibition will take about two and a half hours to visit.`,
    en_split: `This exhibition - will take - about - two and a half - hours - to visit`,
    en_pos: `Subject - Verb - Adverb - Numeral - Noun - Infinitive`,
    vi: `Cu·ªôc tri·ªÉn l√£m n√†y ∆∞·ªõc ch·ª´ng ph·∫£i tham quan trong hai ti·∫øng r∆∞·ª°i.`,
    pinyin: `Zh√®ge zh«énl«én d√†yuƒì y√†o cƒÅnguƒÅn li«éng g√® b√†n xi«éosh√≠.`
  },
  {
    cn_raw: `ÂèÇËßÇÂÆå‰ª•Âêé, ÂõõÁÇπÈíüÂºÄËΩ¶ÂõûÊù•„ÄÇ`,
    cn_split: `ÂèÇËßÇ - ÂÆå - ‰ª•Âêé - , - ÂõõÁÇπÈíü - ÂºÄËΩ¶ - ÂõûÊù• - „ÄÇ`,
    cn_pos: `ƒê·ªông t·ª´ - K·∫øt qu·∫£ - Danh t·ª´ th·ªùi gian - D·∫•u ph·∫©y - Danh t·ª´ th·ªùi gian - ƒê·ªông t·ª´ (V-O) - ƒê·ªông t·ª´ xu h∆∞·ªõng - D·∫•u c√¢u`,
    en_raw: `After visiting, the bus will drive back at four o'clock.`,
    en_split: `After - visiting - , - the bus - will drive - back - at four o'clock`,
    en_pos: `Preposition - Gerund - Punctuation - Subject - Verb - Adverb - Time phrase`,
    vi: `Sau khi tham quan xong, b·ªën gi·ªù xe s·∫Ω ch·∫°y v·ªÅ.`,
    pinyin: `CƒÅnguƒÅn w√°n y«êh√≤u, s√¨ di«énzh≈çng kƒÅichƒì hu√≠l√°i.`
  },
  {
    cn_raw: `Ë¶ÅÊ±ÇÂ§ßÂÆ∂ÂõõÁÇπÂáÜÊó∂‰∏äËΩ¶„ÄÇ`,
    cn_split: `Ë¶ÅÊ±Ç - Â§ßÂÆ∂ - ÂõõÁÇπ - ÂáÜÊó∂ - ‰∏äËΩ¶ - „ÄÇ`,
    cn_pos: `ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - Danh t·ª´ th·ªùi gian - Ph√≥ t·ª´ - ƒê·ªông t·ª´ (V-O) - D·∫•u c√¢u`,
    en_raw: `Everyone is required to get on the bus on time at four.`,
    en_split: `Everyone - is required - to get on - the bus - on time - at four`,
    en_pos: `Subject - Passive Verb - Infinitive - Object - Adverb - Time`,
    vi: `Y√™u c·∫ßu m·ªçi ng∆∞·ªùi b·ªën gi·ªù ƒë√∫ng gi·ªù l√™n xe.`,
    pinyin: `YƒÅoqi√∫ d√†jiƒÅ s√¨ di«én zh«însh√≠ sh√†ngchƒì.`
  },
  {
    cn_raw: `‰∏çÂõûÊù•ÁöÑÂêåÂ≠¶Ë∑üÊàëËØ¥‰∏ÄÂ£∞„ÄÇ`,
    cn_split: `‰∏ç - ÂõûÊù• - ÁöÑ - ÂêåÂ≠¶ - Ë∑ü - Êàë - ËØ¥ - ‰∏ÄÂ£∞ - „ÄÇ`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - Danh t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - S·ªë l∆∞·ª£ng t·ª´ (b·ªï ng·ªØ) - D·∫•u c√¢u`,
    en_raw: `Students who are not coming back, please tell me.`,
    en_split: `Students - who - are not coming - back - , - please - tell - me`,
    en_pos: `Subject - Relative Pronoun - Negative Verb - Adverb - Punctuation - Verb - Verb - Object`,
    vi: `B·∫°n h·ªçc n√†o kh√¥ng v·ªÅ th√¨ n√≥i v·ªõi th·∫ßy m·ªôt ti·∫øng.`,
    pinyin: `B√π hu√≠l√°i de t√≥ngxu√© gƒìn w«í shu≈ç y√¨shƒìng.`
  },
  {
    cn_raw: `Âê¨Ê∏ÖÊ•ö‰∫ÜÊ≤°Êúâ?`,
    cn_split: `Âê¨ - Ê∏ÖÊ•ö - ‰∫Ü - Ê≤°Êúâ - ?`,
    cn_pos: `ƒê·ªông t·ª´ - T√≠nh t·ª´ (b·ªï ng·ªØ) - Tr·ª£ t·ª´ - Ph√≥ t·ª´ nghi v·∫•n - D·∫•u c√¢u`,
    en_raw: `Did you hear clearly?`,
    en_split: `Did - you - hear - clearly`,
    en_pos: `Auxiliary - Subject - Verb - Adverb`,
    vi: `Nghe r√µ ch∆∞a?`,
    pinyin: `Tƒ´ng qƒ´ngchu le m√©iy«íu?`
  },
  {
    cn_raw: `ÁïôÂ≠¶ÁîüÔºöÂê¨Ê∏ÖÊ•ö‰∫Ü„ÄÇ`,
    cn_split: `ÁïôÂ≠¶Áîü - Ôºö - Âê¨ - Ê∏ÖÊ•ö - ‰∫Ü - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·ªông t·ª´ - T√≠nh t·ª´ (b·ªï ng·ªØ) - Tr·ª£ t·ª´ - D·∫•u c√¢u`,
    en_raw: `Foreign students: Heard clearly.`,
    en_split: `Foreign students - : - Heard - clearly`,
    en_pos: `Noun - Punctuation - Verb - Adverb`,
    vi: `L∆∞u h·ªçc sinh: Nghe r√µ r·ªìi ·∫°.`,
    pinyin: `Li√∫xu√©shƒìng: Tƒ´ng qƒ´ngchu le.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºöË¶ÅËÆ∞‰ΩèÂºÄËΩ¶ÁöÑÊó∂Èó¥„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - Ë¶Å - ËÆ∞‰Ωè - ÂºÄËΩ¶ - ÁöÑ - Êó∂Èó¥ - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·ªông t·ª´ nƒÉng nguy·ªán - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - Danh t·ª´ - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: Must remember the time the bus leaves.`,
    en_split: `Teacher Lin - : - Must - remember - the time - the bus leaves`,
    en_pos: `Noun - Punctuation - Modal - Verb - Object - Clause`,
    vi: `Th·∫ßy L√¢m: Ph·∫£i ghi nh·ªõ th·ªùi gian xe ch·∫°y.`,
    pinyin: `L√≠n l«éoshƒ´: Y√†o j√¨zh√π kƒÅichƒì de sh√≠jiƒÅn.`
  },
  {
    cn_raw: `ÈÉΩ‰∏äÊù•‰∫ÜÂêó?`,
    cn_split: `ÈÉΩ - ‰∏äÊù• - ‰∫Ü - Âêó - ?`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n - D·∫•u c√¢u`,
    en_raw: `Is everyone up?`,
    en_split: `Is - everyone - up`,
    en_pos: `Auxiliary - Subject - Adjective`,
    vi: `ƒê√£ l√™n h·∫øt ch∆∞a?`,
    pinyin: `D≈çu sh√†ngl√°i le ma?`
  },
  {
    cn_raw: `Â•Ω, Â∏àÂÇÖ, ÂºÄËΩ¶Âêß„ÄÇ`,
    cn_split: `Â•Ω - , - Â∏àÂÇÖ - , - ÂºÄËΩ¶ - Âêß - „ÄÇ`,
    cn_pos: `T√≠nh t·ª´ - D·∫•u ph·∫©y - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ (V-O) - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u c√¢u`,
    en_raw: `Good, driver, let's start the car.`,
    en_split: `Good - , - driver - , - let's - start - the car`,
    en_pos: `Adjective - Punctuation - Noun - Punctuation - Modal - Verb - Object`,
    vi: `ƒê∆∞·ª£c r·ªìi, b√°c t√†i ∆°i, ch·∫°y xe th√¥i.`,
    pinyin: `H«éo, shƒ´fu, kƒÅichƒì ba.`
  },
  {
    cn_raw: `Â±±Êú¨Ôºö(Á´ôËµ∑Êù•ÁªôËÄÅÂ∏àËÆ©Â∫ß‰Ωç) ËÄÅÂ∏à, ÊÇ®Âà∞ËøôÂÑøÊù•ÂùêÂêß„ÄÇ`,
    cn_split: `Â±±Êú¨ - Ôºö - ( - Á´ô - Ëµ∑Êù• - Áªô - ËÄÅÂ∏à - ËÆ© - Â∫ß‰Ωç - ) - ËÄÅÂ∏à - , - ÊÇ® - Âà∞ - ËøôÂÑø - Êù• - Âùê - Âêß - „ÄÇ`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - K√Ω hi·ªáu - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - K√Ω hi·ªáu - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ ch·ªâ n∆°i ch·ªën - ƒê·ªông t·ª´ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u c√¢u`,
    en_raw: `Yamamoto: (Standing up to give the teacher a seat) Teacher, you come here to sit.`,
    en_split: `Yamamoto - : - ( - Standing - up - to give - the teacher - a seat - ) - Teacher - , - you - come - here - to sit`,
    en_pos: `Noun - Punctuation - Symbol - Participle - Adverb - Infinitive - Indirect Object - Direct Object - Symbol - Noun - Punctuation - Subject - Verb - Adverb - Infinitive`,
    vi: `Yamamoto: (ƒê·ª©ng d·∫≠y nh∆∞·ªùng ch·ªó cho th·∫ßy gi√°o) Th·∫ßy ∆°i, th·∫ßy l·∫°i ƒë√¢y ng·ªìi ƒëi ·∫°.`,
    pinyin: `ShƒÅnbƒõn: (zh√†n q«êl√°i gƒõi l«éoshƒ´ r√†ng zu√≤w√®i) l«éoshƒ´, n√≠n d√†o zh√®r l√°i zu√≤ ba.`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºöÊàë‰∏çËøáÂéª‰∫Ü, Â∞±ÂùêËøôÂÑø‰∫Ü, ‰Ω†Âø´Âùê‰∏ãÂêß„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - Êàë - ‰∏ç - ËøáÂéª - ‰∫Ü - , - Â∞± - Âùê - ËøôÂÑø - ‰∫Ü - , - ‰Ω† - Âø´ - Âùê‰∏ã - Âêß - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ ch·ªâ n∆°i ch·ªën - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ ng·ªØ kh√≠ - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: I am not going over, I'll just sit here, you sit down quickly.`,
    en_split: `Teacher Lin - : - I - am not - going - over - , - I'll - just sit - here - , - you - sit down - quickly`,
    en_pos: `Noun - Punctuation - Subject - Negative Verb - Adverb - Punctuation - Subject - Verb - Adverb - Punctuation - Subject - Verb - Adverb`,
    vi: `Th·∫ßy L√¢m: Th·∫ßy kh√¥ng qua ƒë√≥ ƒë√¢u, th·∫ßy ng·ªìi ngay ƒë√¢y r·ªìi, em mau ng·ªìi xu·ªëng ƒëi.`,
    pinyin: `L√≠n l«éoshƒ´: W«í b√∫ gu√≤q√π le, ji√π zu√≤ zh√®r le, n«ê ku√†i zu√≤xi√† ba.`
  },
  {
    cn_raw: `(Âà∞‰∫ÜÂ±ïËßàÈ¶ÜÈó®Ââç)`,
    cn_split: `( - Âà∞ - ‰∫Ü - Â±ïËßàÈ¶Ü - Èó®Ââç - )`,
    cn_pos: `K√Ω hi·ªáu - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ - Danh t·ª´ - Danh t·ª´ ch·ªâ v·ªã tr√≠ - K√Ω hi·ªáu`,
    en_raw: `(Arrived at the front gate of the exhibition hall)`,
    en_split: `( - Arrived - at - the front gate - of the exhibition hall - )`,
    en_pos: `Symbol - Verb - Preposition - Object - Prepositional phrase - Symbol`,
    vi: `(ƒê√£ ƒë·∫øn tr∆∞·ªõc c·ª≠a nh√† tri·ªÉn l√£m)`,
    pinyin: `(D√†o le zh«énl«éngu«én m√©nqi√°n)`
  },
  {
    cn_raw: `Áéõ‰∏ΩÔºöËÄÅÂ∏à, ÂèÇËßÇÂÆå‰ª•Âêé, ÊàëÊÉ≥Âà∞Â§ß‰ΩøÈ¶ÜÂéªÁúãÊúãÂèã, ‰∏çÂõûÂ≠¶Ê†°Âéª‰∫Ü, ÂèØ‰ª•Âêó?`,
    cn_split: `Áéõ‰∏Ω - Ôºö - ËÄÅÂ∏à - , - ÂèÇËßÇ - ÂÆå - ‰ª•Âêé - , - Êàë - ÊÉ≥ - Âà∞ - Â§ß‰ΩøÈ¶Ü - Âéª - Áúã - ÊúãÂèã - , - ‰∏ç - Âõû - Â≠¶Ê†° - Âéª - ‰∫Ü - , - ÂèØ‰ª• - Âêó - ?`,
    cn_pos: `Danh t·ª´ ri√™ng - D·∫•u c√¢u - Danh t·ª´ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ - K·∫øt qu·∫£ - Danh t·ª´ th·ªùi gian - D·∫•u ph·∫©y - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ nƒÉng nguy·ªán - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - ƒê·ªông t·ª´ - Danh t·ª´ - D·∫•u ph·∫©y - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - ƒê·ªông t·ª´ xu h∆∞·ªõng - Tr·ª£ t·ª´ - D·∫•u ph·∫©y - ƒê·ªông t·ª´ nƒÉng nguy·ªán - Tr·ª£ t·ª´ nghi v·∫•n - D·∫•u c√¢u`,
    en_raw: `Mary: Teacher, after visiting, I want to go to the embassy to see a friend, I'm not going back to school, is that okay?`,
    en_split: `Mary - : - Teacher - , - after - visiting - , - I - want - to go - to the embassy - to see - a friend - , - I'm not - going - back - to school - , - is that - okay`,
    en_pos: `Noun - Punctuation - Noun - Punctuation - Preposition - Gerund - Punctuation - Subject - Modal - Infinitive - Object - Infinitive - Object - Punctuation - Subject - Negative Verb - Adverb - Object - Punctuation - Auxiliary - Adjective`,
    vi: `Mary: Th·∫ßy ∆°i, sau khi tham quan xong, em mu·ªën ƒë·∫øn ƒë·∫°i s·ª© qu√°n thƒÉm b·∫°n, kh√¥ng v·ªÅ tr∆∞·ªùng n·ªØa, c√≥ ƒë∆∞·ª£c kh√¥ng ·∫°?`,
    pinyin: `M«él√¨: L«éoshƒ´, cƒÅnguƒÅn w√°n y«êh√≤u, w«í xi«éng d√†o d√†sh«êgu«én q√π k√†n p√©ngy«íu, b√π hu√≠ xu√©xi√†o q√π le, kƒõy«ê ma?`
  },
  {
    cn_raw: `ÊûóËÄÅÂ∏àÔºöÂèØ‰ª•„ÄÇ`,
    cn_split: `ÊûóËÄÅÂ∏à - Ôºö - ÂèØ‰ª• - „ÄÇ`,
    cn_pos: `Danh t·ª´ - D·∫•u c√¢u - ƒê·ªông t·ª´ nƒÉng nguy·ªán - D·∫•u c√¢u`,
    en_raw: `Teacher Lin: Yes (can).`,
    en_split: `Teacher Lin - : - Yes`,
    en_pos: `Noun - Punctuation - Adverb`,
    vi: `Th·∫ßy L√¢m: ƒê∆∞·ª£c.`,
    pinyin: `L√≠n l«éoshƒ´: Kƒõy«ê.`
  }
];
// C·∫≠p nh·∫≠t h√†m render ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu an to√†n h∆°n
function renderBook() {
    const container = document.getElementById('bookContent');
    sentences.forEach((s, i) => {
        const item = document.createElement('div');
        item.className = 'sentence-item';
        item.innerHTML = `
            <div class="text-content">
                <div class="row-cn">
                    <span id="cn-txt-${i}">${s.cn_raw}</span>
                </div>
                <div id="cn-pos-${i}" class="pos-tag hidden">${s.cn_pos}</div>
                <div id="pinyin-${i}" class="pinyin-row hidden">${s.pinyin || ''}</div>
                <div class="row-en">
                    <span id="en-txt-${i}">${s.en_raw}</span>
                </div>
                <div id="en-pos-${i}" class="pos-tag hidden">${s.en_pos}</div>
                <div class="row-vi">${s.vi}</div>
            </div>
            <div class="control-sidebar">
                <button class="btn-icon" onclick="playSpeech(${i}, 'cn')">‚ôò</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'cn')">‚ôî</button>
                <button class="btn-icon" onclick="playSpeech(${i}, 'en')">‚ôñ</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'en')">‚ôï</button>
            </div>
        `;
        container.appendChild(item);
    });
}
// H√†m ph√°t √¢m m·ªõi: L·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ m·∫£ng thay v√¨ truy·ªÅn chu·ªói qua HTML
// H√†m ph√°t √¢m: T·ª± ƒë·ªông duy tr√¨ ng√¥n ng·ªØ ƒëang ch·ªçn
function playSpeech(index, langType) {
    // 1. D·ª´ng m·ªçi √¢m thanh ƒëang ph√°t ƒë·ªÉ tr√°nh ch·ªìng ch√©o
    window.speechSynthesis.cancel(); 

    let textToRead = "";
    let langCode = "";

    // 2. X√°c ƒë·ªãnh n·ªôi dung v√† m√£ ng√¥n ng·ªØ d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    if (langType === 'cn') {
        textToRead = sentences[index].cn_raw;
        langCode = 'zh-CN';
    } else {
        textToRead = sentences[index].en_raw;
        langCode = 'en-US';
    }

    const msg = new SpeechSynthesisUtterance();
    msg.text = textToRead;
    msg.lang = langCode;
    msg.rate = document.getElementById('rate').value;
    
    // 3. Hi·ªáu ·ª©ng Highlight: T√¥ m√†u c√¢u ƒëang ƒë·ªçc ƒë·ªÉ d·ªÖ theo d√µi
    const allItems = document.getElementsByClassName('sentence-item');
    // X√≥a m√†u c·ªßa t·∫•t c·∫£ c√°c c√¢u kh√°c
    Array.from(allItems).forEach(item => item.style.backgroundColor = "transparent");
    // T√¥ m√†u v√†ng nh·∫°t cho c√¢u hi·ªán t·∫°i
    allItems[index].style.backgroundColor = "rgba(230, 126, 34, 0.1)";

    // 4. X·ª≠ l√Ω khi k·∫øt th√∫c c√¢u
    msg.onend = () => {
        const isAuto = document.getElementById('autoNext').checked;
        if (isAuto && index < sentences.length - 1) {
            setTimeout(() => {
                // QUAN TR·ªåNG: Truy·ªÅn ƒë√∫ng langType hi·ªán t·∫°i v√†o l·∫ßn g·ªçi ti·∫øp theo
                playSpeech(index + 1, langType); 
                
                // T·ª± ƒë·ªông cu·ªôn m√†n h√¨nh ƒë·∫øn c√¢u ti·∫øp theo
                allItems[index + 1].scrollIntoView({
                    behavior: "smooth", 
                    block: "center"
                });
            }, 500); // Ngh·ªâ 0.5 gi√¢y gi·ªØa c√°c c√¢u ƒë·ªÉ ng∆∞·ªùi d√πng k·ªãp ng·∫•m
        }
    };

    window.speechSynthesis.speak(msg);
}
function toggleMode(index, lang) {
    const txtSpan = document.getElementById(`${lang}-txt-${index}`);
    const posSpan = document.getElementById(`${lang}-pos-${index}`);
    const isOriginal = txtSpan.innerText === sentences[index][`${lang}_raw`];

    txtSpan.innerText = isOriginal ? sentences[index][`${lang}_split`] : sentences[index][`${lang}_raw`];
    posSpan.classList.toggle('hidden');
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

function toggleAllPinyin() {
    // 1. L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class l√† pinyin-row
    const pinyinElements = document.getElementsByClassName('pinyin-row');
    
    // 2. Ki·ªÉm tra n·∫øu kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o (b√°o l·ªói ra Console ƒë·ªÉ ki·ªÉm tra)
    if (pinyinElements.length === 0) {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o c√≥ class 'pinyin-row'");
        return;
    }

    // 3. Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ v√† b·∫≠t/t·∫Øt class 'hidden'
    for (let i = 0; i < pinyinElements.length; i++) {
        pinyinElements[i].classList.toggle('hidden');
    }
}

function speak(text, lang, index) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    msg.rate = document.getElementById('rate').value;

    msg.onend = () => {
        if (document.getElementById('autoNext').checked && index < sentences.length - 1) {
            setTimeout(() => {
                speak(sentences[index + 1].cn_raw, 'zh-CN', index + 1);
                document.getElementsByClassName('sentence-item')[index+1].scrollIntoView({behavior: "smooth", block: "center"});
            }, 1200);
        }
    };
    window.speechSynthesis.speak(msg);
}

renderBook();
</script>
</body>
</html>