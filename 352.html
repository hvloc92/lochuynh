<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet">
    <title>S√°ch ƒêa Ng√¥n Ng·ªØ</title>
    <style>
        :root {
            --bg-body: #dcdcdc;
            --bg-book: #f4f1ea;
            --text-main: #1a1a1a;
            --text-sub: #555;
            --accent: #e67e22;
            --border: #d1ccc0;
        }

        /* Ch·∫ø ƒë·ªô Dark Mode */
        .dark-mode {
            --bg-body: #1a1a1b;
            --bg-book: #2c2c2e;
            --text-main: #e1e1e1;
            --text-sub: #b0b0b0;
            --accent: #f39c12;
            --border: #444;
        }

        body { 
            margin: 0; padding: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: all 0.3s ease;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .book-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--bg-book);
            min-height: 100vh;
            padding-top: 20px;
        }

        .sentence-item {
            display: flex;
            padding: 20px 5%; /* L·ªÅ tr√°i 5% theo y√™u c·∫ßu */
            border-bottom: 1px solid var(--border);
            word-wrap: break-word; /* T·ª± ƒë·ªông xu·ªëng d√≤ng */
        }

        .text-content {
            flex: 1;
            padding-right: 15px;
        }

        .row-cn { font-family: "Noto Serif SC","Segoe UI", Tahoma, Geneva, Verdana, sans-serif; font-size: 1.8rem; font-weight: normal; margin-bottom: 20px; line-height: 1.4; }
        .row-en { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-main); opacity: 0.9; }
        .row-vi { font-size: 1rem; color: var(--text-sub); font-style: italic; }
        
        .pos-tag { font-size: 0.85rem; color: var(--accent); display: block; margin-bottom: 20px; margin-top: 0px; font-weight: normal; }

        /* Ph√≠m ch·ª©c nƒÉng d·∫°ng c·ªôt icon */
        .control-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: 0.2s;
        }
        .btn-icon:hover { background: #eee; transform: scale(1.1); }

        /* Menu n·ªïi c·ªë ƒë·ªãnh ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i */
        .floating-menu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }

        .settings-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            color: #333;
            font-size: 14px;
        }

        .show-settings .settings-box { display: block; }

        .btn-main-float {
            width: 50px;
            height: 50px;
            background: #34495e;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

	/* Th√™m v√†o trong th·∫ª <style> */
	.pinyin-row {
    		font-size: 16px;
		font-weight: normal;
   		color: #27ae60; /* M√†u xanh l√° d·ªãu m·∫Øt */
    		display: block;
    		margin-top: 0px;
		margin-bottom: 20px;
	}


        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="book-container" id="bookContent">
    </div>

<div class="floating-menu" id="floatMenu">
    <div class="settings-box">
        <strong>‚öôÔ∏è C√†i ƒë·∫∑t</strong><hr>
        T·ªëc ƒë·ªô: <input type="range" id="rate" min="0.5" max="1.3" step="0.1" value="0.9" style="width: 100px;"><br>
        <label><input type="checkbox" id="autoNext"> T·ª± ƒë·ªông chuy·ªÉn</label><br>
	<button onclick="toggleAllPinyin()" style="width: 100%; margin-top: 10px;">üî§ ·∫®n/Hi·ªán Pinyin</button>
        <button onclick="toggleDarkMode()" style="width: 100%; margin-top: 10px;">üåô Dark Mode</button>
    </div>
    <button class="btn-main-float" onclick="document.getElementById('floatMenu').classList.toggle('show-settings')">üõ†Ô∏è</button>
</div>

<script>
const sentences = [
  {
    cn_raw: `‰Ω†‰ª•ÂâçÊù•Ëøá‰∏≠ÂõΩÂêó.`,
    cn_split: `‰Ω† - ‰ª•Ââç - Êù• - Ëøá - ‰∏≠ÂõΩ - Âêó`,
    cn_pos: `ƒê·∫°i t·ª´ - Danh t·ª´ th·ªùi gian - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Have you been to China before?`,
    en_split: `Have - you - been - to - China - before?`,
    en_pos: `Tr·ª£ ƒë·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - Tr·∫°ng t·ª´`,
    vi: `B·∫°n tr∆∞·ªõc ƒë√¢y ƒë√£ t·ª´ng ƒë·∫øn Trung Qu·ªëc ch∆∞a?`,
    pinyin: `N«ê y«êqi√°n l√°igu√≤ Zh≈çnggu√≥ ma.`
  },
  {
    cn_raw: `Â±±Êú¨, Âê¨ËØ¥‰Ω†ÊõæÁªèÊù•Ëøá‰∏≠ÂõΩ, ÊòØÂêó?`,
    cn_split: `Â±±Êú¨ - Âê¨ËØ¥ - ‰Ω† - ÊõæÁªè - Êù• - Ëøá - ‰∏≠ÂõΩ - ÊòØÂêó`,
    cn_pos: `Danh t·ª´ ri√™ng - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ - C·ª•m t·ª´ nghi v·∫•n`,
    en_raw: `Yamamoto, I heard that you have been to China before, is that right?`,
    en_split: `Yamamoto - I - heard - that - you - have - been - to - China - before - is - that - right?`,
    en_pos: `Danh t·ª´ ri√™ng - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Li√™n t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - Tr·∫°ng t·ª´ - ƒê·ªông t·ª´ to-be - ƒê·∫°i t·ª´ - T√≠nh t·ª´`,
    vi: `S∆°n B·∫£n, nghe n√≥i b·∫°n ƒë√£ t·ª´ng ƒë·∫øn Trung Qu·ªëc, ƒë√∫ng kh√¥ng?`,
    pinyin: `ShƒÅnbƒõn, tƒ´ngshu≈ç n«ê c√©ngjƒ´ng l√°igu√≤ Zh≈çnggu√≥, sh√¨ ma?`
  },
  {
    cn_raw: `ÊòØÂïä, Êù•Ëøá‰∏ÄÊ¨°„ÄÇ`,
    cn_split: `ÊòØ - Âïä - Êù• - Ëøá - ‰∏ÄÊ¨°`,
    cn_pos: `ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - S·ªë l∆∞·ª£ng t·ª´`,
    en_raw: `Yes, I have been there once.`,
    en_split: `Yes - I - have - been - there - once`,
    en_pos: `Th√°n t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·ªông t·ª´ - Tr·∫°ng t·ª´ - Tr·∫°ng t·ª´`,
    vi: `ƒê√∫ng v·∫≠y, ƒë√£ t·ª´ng ƒë·∫øn m·ªôt l·∫ßn.`,
    pinyin: `Sh√¨ a, l√°igu√≤ y√≠c√¨.`
  },
  {
    cn_raw: `‰Ω†Âë¢?`,
    cn_split: `‰Ω† - Âë¢`,
    cn_pos: `ƒê·∫°i t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `How about you?`,
    en_split: `How - about - you?`,
    en_pos: `Tr·∫°ng t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´`,
    vi: `C√≤n b·∫°n th√¨ sao?`,
    pinyin: `N«ê ne?`
  },
  {
    cn_raw: `ÊàëÊ≤°ÊúâÊù•Ëøá, ËøôÊòØÁ¨¨‰∏ÄÊ¨°„ÄÇ`,
    cn_split: `Êàë - Ê≤°Êúâ - Êù• - Ëøá - Ëøô - ÊòØ - Á¨¨‰∏Ä - Ê¨°`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - ƒê·∫°i t·ª´ ch·ªâ ƒë·ªãnh - ƒê·ªông t·ª´ - S·ªë t·ª´ - L∆∞·ª£ng t·ª´`,
    en_raw: `I haven't been there, this is the first time.`,
    en_split: `I - have - not - been - there - this - is - the - first - time`,
    en_pos: `ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·∫°ng t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´ - Danh t·ª´`,
    vi: `T√¥i ch∆∞a t·ª´ng ƒë·∫øn, ƒë√¢y l√† l·∫ßn ƒë·∫ßu ti√™n.`,
    pinyin: `W«í m√©iy«íu l√°igu√≤, zh√® sh√¨ d√¨ yƒ´ c√¨.`
  },
  {
    cn_raw: `‰Ω†ÈÉΩÂéªËøá‰ªÄ‰πàÂú∞Êñπ?`,
    cn_split: `‰Ω† - ÈÉΩ - Âéª - Ëøá - ‰ªÄ‰πà - Âú∞Êñπ`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - ƒê·∫°i t·ª´ nghi v·∫•n - Danh t·ª´`,
    en_raw: `What places have you all been to?`,
    en_split: `What - places - have - you - all - been - to?`,
    en_pos: `T√≠nh t·ª´ nghi v·∫•n - Danh t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´`,
    vi: `B·∫°n ƒë√£ ƒëi qua nh·ªØng n∆°i n√†o r·ªìi?`,
    pinyin: `N«ê d≈çu q√πgu√≤ sh√©nme d√¨fang?`
  },
  {
    cn_raw: `ÊàëÂ∑≤ÁªèÂéªËøáÂ•ΩÂ§öÂú∞Êñπ‰∫Ü„ÄÇ`,
    cn_split: `Êàë - Â∑≤Áªè - Âéª - Ëøá - Â•ΩÂ§ö - Âú∞Êñπ - ‰∫Ü`,
    cn_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - T√≠nh t·ª´ - Danh t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `I have already been to many places.`,
    en_split: `I - have - already - been - to - many - places`,
    en_pos: `ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - T√≠nh t·ª´ - Danh t·ª´`,
    vi: `T√¥i ƒë√£ ƒëi qua r·∫•t nhi·ªÅu n∆°i r·ªìi.`,
    pinyin: `W«í y«êjƒ´ng q√πgu√≤ h«éodu≈ç d√¨fang le.`
  },
  {
    cn_raw: `ÂåóËæπÂéªËøáÂìàÂ∞îÊª®, ÂçóËæπÂà∞ËøáÊµ∑ÂçóÂ≤õ, ‰∏úËæπ‰∏äËøáÊ≥∞Â±±, Ë•øËæπÂéªËøáË•øÂÆâÂíåÊï¶ÁÖå„ÄÇ`,
    cn_split: `ÂåóËæπ - Âéª - Ëøá - ÂìàÂ∞îÊª® - ÂçóËæπ - Âà∞ - Ëøá - Êµ∑ÂçóÂ≤õ - ‰∏úËæπ - ‰∏ä - Ëøá - Ê≥∞Â±± - Ë•øËæπ - Âéª - Ëøá - Ë•øÂÆâ - Âíå - Êï¶ÁÖå`,
    cn_pos: `Danh t·ª´ ph∆∞∆°ng v·ªã - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ ri√™ng (x4) - Li√™n t·ª´`,
    en_raw: `I went to Harbin in the north, reached Hainan Island in the south, climbed Mount Tai in the east, and went to Xi'an and Dunhuang in the west.`,
    en_split: `I - went - to - Harbin - in - the - north - reached - Hainan - Island - in - the - south - climbed - Mount - Tai - in - the - east - and - went - to - Xi'an - and - Dunhuang - in - the - west`,
    en_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ (v3) - Gi·ªõi t·ª´ - Danh t·ª´ - Li√™n t·ª´`,
    vi: `Ph√≠a b·∫Øc ƒë√£ ƒëi C√°p Nhƒ© T√¢n, ph√≠a nam ƒë√£ ƒë·∫øn ƒë·∫£o H·∫£i Nam, ph√≠a ƒë√¥ng ƒë√£ l√™n n√∫i Th√°i S∆°n, ph√≠a t√¢y ƒë√£ ƒëi T√¢y An v√† ƒê√¥n Ho√†ng.`,
    pinyin: `BƒõibiƒÅn q√πgu√≤ HƒÅ'ƒõrbƒ´n, n√°nbiƒÅn d√†ogu√≤ H«éin√°nd«éo, d≈çngbiƒÅn sh√†nggu√≤ T√†ishƒÅn, xƒ´biƒÅn q√πgu√≤ Xƒ´'ƒÅn h√© D≈´nhu√°ng.`
  },
  {
    cn_raw: `‰Ω†ÂéªËøáÁöÑÂú∞ÊñπÁúü‰∏çÂ∞ë„ÄÇ`,
    cn_split: `‰Ω† - Âéª - Ëøá - ÁöÑ - Âú∞Êñπ - Áúü - ‰∏çÂ∞ë`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Tr·ª£ t·ª´ k·∫øt c·∫•u - Danh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    en_raw: `The places you have been to are really many.`,
    en_split: `The - places - you - have - been - to - are - really - many`,
    en_pos: `M·∫°o t·ª´ - Danh t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - ƒê·ªông t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´`,
    vi: `Nh·ªØng n∆°i b·∫°n ƒëi qua th·∫≠t kh√¥ng √≠t ch√∫t n√†o.`,
    pinyin: `N«ê q√πgu√≤ de d√¨fang zhƒìn b√πsh«éo.`
  },
  {
    cn_raw: `Êù•‰∏≠ÂõΩ‰ª•Âêé, ÊàëÂè™ÂéªËøáÈ¢êÂíåÂõ≠„ÄÅÊïÖÂÆ´ÂíåÈïøÂüé„ÄÇ`,
    cn_split: `Êù• - ‰∏≠ÂõΩ - ‰ª•Âêé - Êàë - Âè™ - Âéª - Ëøá - È¢êÂíåÂõ≠ - ÊïÖÂÆ´ - Âíå - ÈïøÂüé`,
    cn_pos: `ƒê·ªông t·ª´ - Danh t·ª´ - Danh t·ª´ th·ªùi gian - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ ri√™ng (x3) - Li√™n t·ª´`,
    en_raw: `After coming to China, I have only been to the Summer Palace, the Forbidden City, and the Great Wall.`,
    en_split: `After - coming - to - China - I - have - only - been - to - the - Summer - Palace - the - Forbidden - City - and - the - Great - Wall`,
    en_pos: `Li√™n t·ª´ - Danh ƒë·ªông t·ª´ - Gi·ªõi t·ª´ - Danh t·ª´ - ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - M·∫°o t·ª´ - Danh t·ª´ ri√™ng`,
    vi: `Sau khi ƒë·∫øn Trung Qu·ªëc, t√¥i m·ªõi ch·ªâ ƒëi Di H√≤a Vi√™n, C·ªë Cung v√† V·∫°n L√Ω Tr∆∞·ªùng Th√†nh.`,
    pinyin: `L√°i Zh≈çnggu√≥ y«êh√≤u, w«í zh«ê q√πgu√≤ Y√≠h√©yu√°n, G√πg≈çng h√© Ch√°ngch√©ng.`
  },
  {
    cn_raw: `‰π†ÊÉØÂêÉ‰∏≠È§ê‰∫ÜÂêó?`,
    cn_split: `‰π†ÊÉØ - ÂêÉ - ‰∏≠È§ê - ‰∫Ü - Âêó`,
    cn_pos: `ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Are you used to eating Chinese food yet?`,
    en_split: `Are - you - used - to - eating - Chinese - food - yet?`,
    en_pos: `ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ - T√≠nh t·ª´ - Gi·ªõi t·ª´ - Danh ƒë·ªông t·ª´ - T√≠nh t·ª´ - Danh t·ª´ - Ph√≥ t·ª´`,
    vi: `ƒê√£ quen ƒÉn m√≥n Trung Qu·ªëc ch∆∞a?`,
    pinyin: `X√≠gu√†n chƒ´ Zh≈çngcƒÅn le ma?`
  },
  {
    cn_raw: `Êó©Â∞±‰π†ÊÉØ‰∫Ü„ÄÇ`,
    cn_split: `Êó©Â∞± - ‰π†ÊÉØ - ‰∫Ü`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ng·ªØ kh√≠`,
    en_raw: `I got used to it long ago.`,
    en_split: `I - got - used - to - it - long - ago`,
    en_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´ - Gi·ªõi t·ª´ - ƒê·∫°i t·ª´ - T√≠nh t·ª´ - Ph√≥ t·ª´`,
    vi: `ƒê√£ s·ªõm quen r·ªìi.`,
    pinyin: `Z«éoji√π x√≠gu√†n le.`
  },
  {
    cn_raw: `‰Ω†ÂêÉËøáÂì™‰∫õ‰∏≠ÂõΩËèú?`,
    cn_split: `‰Ω† - ÂêÉ - Ëøá - Âì™‰∫õ - ‰∏≠ÂõΩËèú`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - ƒê·∫°i t·ª´ nghi v·∫•n - Danh t·ª´`,
    en_raw: `Which Chinese dishes have you eaten?`,
    en_split: `Which - Chinese - dishes - have - you - eaten?`,
    en_pos: `T√≠nh t·ª´ nghi v·∫•n - T√≠nh t·ª´ - Danh t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´`,
    vi: `B·∫°n ƒë√£ ƒÉn qua nh·ªØng m√≥n Trung Qu·ªëc n√†o?`,
    pinyin: `N«ê chƒ´gu√≤ n«éxiƒì Zh≈çnggu√≥c√†i?`
  },
  {
    cn_raw: `ÂêÉËøáÂæàÂ§ö„ÄÇ`,
    cn_split: `ÂêÉ - Ëøá - ÂæàÂ§ö`,
    cn_pos: `ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - T√≠nh t·ª´/S·ªë l∆∞·ª£ng`,
    en_raw: `I have eaten many.`,
    en_split: `I - have - eaten - many`,
    en_pos: `ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´`,
    vi: `ƒê√£ ƒÉn qua r·∫•t nhi·ªÅu.`,
    pinyin: `Chƒ´gu√≤ hƒõndu≈ç.`
  },
  {
    cn_raw: `ÊúÄÂñúÊ¨¢ÂêÉÁöÑÊòØÂåó‰∫¨ÁÉ§È∏≠„ÄÇ`,
    cn_split: `ÊúÄ - ÂñúÊ¨¢ - ÂêÉ - ÁöÑ - ÊòØ - Âåó‰∫¨ÁÉ§È∏≠`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ k·∫øt c·∫•u - ƒê·ªông t·ª´ - Danh t·ª´`,
    en_raw: `What I like eating most is Beijing Roast Duck.`,
    en_split: `What - I - like - eating - most - is - Beijing - Roast - Duck`,
    en_pos: `ƒê·∫°i t·ª´ nghi v·∫•n - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Danh ƒë·ªông t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ ri√™ng`,
    vi: `Th·ª© th√≠ch ƒÉn nh·∫•t l√† v·ªãt quay B·∫Øc Kinh.`,
    pinyin: `Zu√¨ x«êhuan chƒ´ de sh√¨ Bƒõijƒ´ng k«éoyƒÅ.`
  },
  {
    cn_raw: `‰Ω†Áà±ÂêÉ‰ªÄ‰πà?`,
    cn_split: `‰Ω† - Áà± - ÂêÉ - ‰ªÄ‰πà`,
    cn_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´ nghi v·∫•n`,
    en_raw: `What do you love to eat?`,
    en_split: `What - do - you - love - to - eat?`,
    en_pos: `ƒê·∫°i t·ª´ nghi v·∫•n - Tr·ª£ ƒë·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - ƒê·ªông t·ª´`,
    vi: `B·∫°n y√™u th√≠ch ƒÉn g√¨?`,
    pinyin: `N«ê √†i chƒ´ sh√©nme?`
  },
  {
    cn_raw: `‰∏≠ÂõΩËèúÊàëÈÉΩÁà±ÂêÉ„ÄÇ`,
    cn_split: `‰∏≠ÂõΩËèú - Êàë - ÈÉΩ - Áà± - ÂêÉ`,
    cn_pos: `Danh t·ª´ - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´`,
    en_raw: `I love to eat all Chinese dishes.`,
    en_split: `I - love - to - eat - all - Chinese - dishes`,
    en_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´ - T√≠nh t·ª´ - Danh t·ª´`,
    vi: `M√≥n Trung Qu·ªëc t√¥i ƒë·ªÅu th√≠ch ƒÉn.`,
    pinyin: `Zh≈çnggu√≥c√†i w«í d≈çu √†i chƒ´.`
  },
  {
    cn_raw: `ËøòÁà±ÂêÉÁÉ§ÁôΩËñØ„ÄÅÁ≥ñËë´Ëä¶‰ªÄ‰πàÁöÑ„ÄÇ`,
    cn_split: `Ëøò - Áà± - ÂêÉ - ÁÉ§ÁôΩËñØ - Á≥ñËë´Ëä¶ - ‰ªÄ‰πàÁöÑ`,
    cn_pos: `Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ - Danh t·ª´ - C·ª•m tr·ª£ t·ª´`,
    en_raw: `I also love to eat roasted sweet potatoes, sugar-coated haws, and so on.`,
    en_split: `I - also - love - to - eat - roasted - sweet - potatoes - sugar-coated - haws - and - so - on`,
    en_pos: `ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - ƒê·ªông t·ª´ - T√≠nh t·ª´ - T√≠nh t·ª´ - Danh t·ª´ - T√≠nh t·ª´ - Danh t·ª´ - Li√™n t·ª´`,
    vi: `C√≤n th√≠ch ƒÉn khoai lang n∆∞·ªõng, k·∫πo h·ªì l√¥ v√† nh·ªØng th·ª© t∆∞∆°ng t·ª±.`,
    pinyin: `H√°i √†i chƒ´ k«éob√°ish«î, t√°ngh√∫lu sh√©nme de.`
  },
  {
    cn_raw: `ÁúãËøá‰∫¨ÂâßÂêó?`,
    cn_split: `Áúã - Ëøá - ‰∫¨Ââß - Âêó`,
    cn_pos: `ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i - Danh t·ª´ - Tr·ª£ t·ª´ nghi v·∫•n`,
    en_raw: `Have you watched Peking Opera?`,
    en_split: `Have - you - watched - Peking - Opera?`,
    en_pos: `Tr·ª£ ƒë·ªông t·ª´ - ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Danh t·ª´ ri√™ng - Danh t·ª´`,
    vi: `ƒê√£ t·ª´ng xem Kinh k·ªãch ch∆∞a?`,
    pinyin: `K√†ngu√≤ Jƒ´ngj√π ma?`
  },
  {
    cn_raw: `Ê≤°ÁúãËøá„ÄÇ`,
    cn_split: `Ê≤° - Áúã - Ëøá`,
    cn_pos: `Ph√≥ t·ª´ ph·ªß ƒë·ªãnh - ƒê·ªông t·ª´ - Tr·ª£ t·ª´ ƒë·ªông th√°i`,
    en_raw: `I haven't watched it.`,
    en_split: `I - have - not - watched - it`,
    en_pos: `ƒê·∫°i t·ª´ - Tr·ª£ ƒë·ªông t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - ƒê·∫°i t·ª´`,
    vi: `Ch∆∞a t·ª´ng xem qua.`,
    pinyin: `M√©i k√†ngu√≤.`
  },
  {
    cn_raw: `Âê¨ËØ¥‰∫¨ÂâßÂæàÊúâÊÑèÊÄù, ÊàëÂæàÊÉ≥ÂéªÁúãÁúã„ÄÇ`,
    cn_split: `Âê¨ËØ¥ - ‰∫¨Ââß - Âæà - ÊúâÊÑèÊÄù - Êàë - Âæà - ÊÉ≥ - Âéª - ÁúãÁúã`,
    cn_pos: `ƒê·ªông t·ª´ - Danh t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ nguy·ªán v·ªçng - ƒê·ªông t·ª´ - ƒê·ªông t·ª´ l·∫∑p l·∫°i`,
    en_raw: `I heard that Peking Opera is very interesting, I really want to go and see.`,
    en_split: `I - heard - that - Peking - Opera - is - very - interesting - I - really - want - to - go - and - see`,
    en_pos: `ƒê·∫°i t·ª´ - ƒê·ªông t·ª´ - Li√™n t·ª´ - Danh t·ª´ ri√™ng - Danh t·ª´ - ƒê·ªông t·ª´ - Ph√≥ t·ª´ - T√≠nh t·ª´ - ƒê·∫°i t·ª´ - Ph√≥ t·ª´ - ƒê·ªông t·ª´ - Gi·ªõi t·ª´ - ƒê·ªông t·ª´ - Li√™n t·ª´ - ƒê·ªông t·ª´`,
    vi: `Nghe n√≥i Kinh k·ªãch r·∫•t th√∫ v·ªã, t√¥i r·∫•t mu·ªën ƒëi xem th·ª≠.`,
    pinyin: `Tƒ´ngshu≈ç Jƒ´ngj√π hƒõn y«íuy√¨si, w«í hƒõn xi«éng q√π k√†nkan.`
  }
];
// C·∫≠p nh·∫≠t h√†m render ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu an to√†n h∆°n
function renderBook() {
    const container = document.getElementById('bookContent');
    sentences.forEach((s, i) => {
        const item = document.createElement('div');
        item.className = 'sentence-item';
        item.innerHTML = `
            <div class="text-content">
                <div class="row-cn">
                    <span id="cn-txt-${i}">${s.cn_raw}</span>
                </div>
                <div id="cn-pos-${i}" class="pos-tag hidden">${s.cn_pos}</div>
                <div id="pinyin-${i}" class="pinyin-row hidden">${s.pinyin || ''}</div>
                <div class="row-en">
                    <span id="en-txt-${i}">${s.en_raw}</span>
                </div>
                <div id="en-pos-${i}" class="pos-tag hidden">${s.en_pos}</div>
                <div class="row-vi">${s.vi}</div>
            </div>
            <div class="control-sidebar">
                <button class="btn-icon" onclick="playSpeech(${i}, 'cn')">‚ôò</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'cn')">‚ôî</button>
                <button class="btn-icon" onclick="playSpeech(${i}, 'en')">‚ôñ</button>
                <button class="btn-icon" onclick="toggleMode(${i}, 'en')">‚ôï</button>
            </div>
        `;
        container.appendChild(item);
    });
}
// H√†m ph√°t √¢m m·ªõi: L·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp t·ª´ m·∫£ng thay v√¨ truy·ªÅn chu·ªói qua HTML
// H√†m ph√°t √¢m: T·ª± ƒë·ªông duy tr√¨ ng√¥n ng·ªØ ƒëang ch·ªçn
function playSpeech(index, langType) {
    // 1. D·ª´ng m·ªçi √¢m thanh ƒëang ph√°t ƒë·ªÉ tr√°nh ch·ªìng ch√©o
    window.speechSynthesis.cancel(); 

    let textToRead = "";
    let langCode = "";

    // 2. X√°c ƒë·ªãnh n·ªôi dung v√† m√£ ng√¥n ng·ªØ d·ª±a tr√™n l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng
    if (langType === 'cn') {
        textToRead = sentences[index].cn_raw;
        langCode = 'zh-CN';
    } else {
        textToRead = sentences[index].en_raw;
        langCode = 'en-US';
    }

    const msg = new SpeechSynthesisUtterance();
    msg.text = textToRead;
    msg.lang = langCode;
    msg.rate = document.getElementById('rate').value;
    
    // 3. Hi·ªáu ·ª©ng Highlight: T√¥ m√†u c√¢u ƒëang ƒë·ªçc ƒë·ªÉ d·ªÖ theo d√µi
    const allItems = document.getElementsByClassName('sentence-item');
    // X√≥a m√†u c·ªßa t·∫•t c·∫£ c√°c c√¢u kh√°c
    Array.from(allItems).forEach(item => item.style.backgroundColor = "transparent");
    // T√¥ m√†u v√†ng nh·∫°t cho c√¢u hi·ªán t·∫°i
    allItems[index].style.backgroundColor = "rgba(230, 126, 34, 0.1)";

    // 4. X·ª≠ l√Ω khi k·∫øt th√∫c c√¢u
    msg.onend = () => {
        const isAuto = document.getElementById('autoNext').checked;
        if (isAuto && index < sentences.length - 1) {
            setTimeout(() => {
                // QUAN TR·ªåNG: Truy·ªÅn ƒë√∫ng langType hi·ªán t·∫°i v√†o l·∫ßn g·ªçi ti·∫øp theo
                playSpeech(index + 1, langType); 
                
                // T·ª± ƒë·ªông cu·ªôn m√†n h√¨nh ƒë·∫øn c√¢u ti·∫øp theo
                allItems[index + 1].scrollIntoView({
                    behavior: "smooth", 
                    block: "center"
                });
            }, 500); // Ngh·ªâ 0.5 gi√¢y gi·ªØa c√°c c√¢u ƒë·ªÉ ng∆∞·ªùi d√πng k·ªãp ng·∫•m
        }
    };

    window.speechSynthesis.speak(msg);
}
function toggleMode(index, lang) {
    const txtSpan = document.getElementById(`${lang}-txt-${index}`);
    const posSpan = document.getElementById(`${lang}-pos-${index}`);
    const isOriginal = txtSpan.innerText === sentences[index][`${lang}_raw`];

    txtSpan.innerText = isOriginal ? sentences[index][`${lang}_split`] : sentences[index][`${lang}_raw`];
    posSpan.classList.toggle('hidden');
}

function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
}

function toggleAllPinyin() {
    // 1. L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ c√≥ class l√† pinyin-row
    const pinyinElements = document.getElementsByClassName('pinyin-row');
    
    // 2. Ki·ªÉm tra n·∫øu kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o (b√°o l·ªói ra Console ƒë·ªÉ ki·ªÉm tra)
    if (pinyinElements.length === 0) {
        console.error("Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ n√†o c√≥ class 'pinyin-row'");
        return;
    }

    // 3. Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ v√† b·∫≠t/t·∫Øt class 'hidden'
    for (let i = 0; i < pinyinElements.length; i++) {
        pinyinElements[i].classList.toggle('hidden');
    }
}

function speak(text, lang, index) {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = lang;
    msg.rate = document.getElementById('rate').value;

    msg.onend = () => {
        if (document.getElementById('autoNext').checked && index < sentences.length - 1) {
            setTimeout(() => {
                speak(sentences[index + 1].cn_raw, 'zh-CN', index + 1);
                document.getElementsByClassName('sentence-item')[index+1].scrollIntoView({behavior: "smooth", block: "center"});
            }, 1200);
        }
    };
    window.speechSynthesis.speak(msg);
}

renderBook();
</script>
</body>
</html>